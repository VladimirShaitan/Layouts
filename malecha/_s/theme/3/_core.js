"use strict";!function(e){for(var t,n=0,a=["ms","moz","webkit","o"],r=0;r<a.length&&!e.requestAnimationFrame;++r)e.requestAnimationFrame=e[a[r]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[a[r]+"CancelAnimationFrame"]||e[a[r]+"CancelRequestAnimationFrame"];if(e.requestAnimationFrame||(e.requestAnimationFrame=function(t,a){var r=(new Date).getTime(),i=Math.max(0,16-(r-n)),o=e.setTimeout(function(){t(r+i)},i);return n=r+i,o}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)}),(t=Element.prototype).matches=t.matches||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector,t.closest=t.closest||function(e){return this?this.matches(e)?this:this.parentElement?this.parentElement.closest(e):null:null},Array.prototype.includes||(Array.prototype.includes=function(e){var t=Object(this),n=parseInt(t.length,10)||0;if(0===n)return!1;var a,r=parseInt(arguments[1],10)||0;for(r>=0?a=r:(a=n+r)<0&&(a=0);a<n;){var i=t[a];if(e===i||e!=e&&i!=i)return!0;a++}return!1}),Object.values||Object.defineProperty(Object,"values",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return"string"==typeof e?e.split(""):Array.isArray(e)?e:"object"!=typeof e?[]:Object.keys(e).map(function(t){return e[t]})}}),"function"!=typeof e.CustomEvent){var i=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};i.prototype=e.Event.prototype,e.CustomEvent=i}e.svg4everybody=function(){function t(e,t){if(t){var n=document.createDocumentFragment(),a=t.getAttribute("viewBox");e.setAttribute("viewBox",a);for(var r=t.cloneNode(!0);r.childNodes.length;)n.appendChild(r.firstChild);e.appendChild(n)}}function n(e){e.onreadystatechange=function(){if(4===e.readyState){var n=e._cachedDocument;n||((n=e._cachedDocument=document.implementation.createHTMLDocument("")).body.innerHTML=e.responseText,e._cachedTarget={}),e._embeds.splice(0).map(function(a){var r=e._cachedTarget[a.id];r||(r=e._cachedTarget[a.id]=n.getElementById(a.id)),t(a.svg,r)})}},e.onreadystatechange()}return function(a){var r,i=Object(a);r="polyfill"in i?i.polyfill:/\bTrident\/[5-7]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||/\bEdge\/(\d+)\.(\d+)\b/.test(navigator.userAgent)||(navigator.userAgent.match(/\bAp{2}leWebKit\/(\d+)\b/)||[])[1]<537;var o={},c=e.requestAnimationFrame||setTimeout,s=document.getElementsByTagName("use");r&&function e(){for(var a=0;a<s.length;){var u=s[a],l=u.parentNode;if(l&&/svg/i.test(l.nodeName)){var m=u.getAttribute("xlink:href");if(r&&(!i.validate||i.validate(m,l,u))){l.removeChild(u);var d=m.split("#"),v=d.shift(),f=d.join("#");if(v.length){var b=o[v];b||((b=o[v]=new XMLHttpRequest).open("GET",v),b.send(),b._embeds=[]),b._embeds.push({svg:l,id:f}),n(b)}else t(l,document.getElementById(f))}}else++a}c(e,67)}()}}()}(window);
"use strict";!function(e){function o(e){e.preventDefault()}e.videoImgFallback=function(e){console.warn("video load error, gif fallback used");var o=e.querySelector("img");o&&e.parentNode.replaceChild(o,e)},e.getCookie=function(e){var o=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([$()*+.\/?[\\\]^{|}])/g,"\\$1")+"=([^;]*)"));return o?decodeURIComponent(o[1]):void 0},e.setCookie=function(e,o,n){void 0===n&&(n={});var t=n.expires;if("number"==typeof t&&t){var i=new Date;i.setTime(i.getTime()+1e3*t),t=n.expires=i}t&&t.toUTCString&&(n.expires=t.toUTCString());var r=e+"="+(o=encodeURIComponent(o));for(var c in n){r+="; "+c;var s=n[c];!0!==s&&(r+="="+s)}document.cookie=r},e.deleteCookie=function(e){setCookie(e,"",{expires:-1})},e.getJsonFromUrl=function(e){var o;if(e){var n=location.href.indexOf("?");if(-1===n)return[];o=location.href.substr(n+1)}else o=location.search.substr(1);var t={};return o.split("&").forEach(function(e){if(e){var o=(e=e.split("+").join(" ")).indexOf("="),n=o>-1?e.substr(0,o):e,i=o>-1?decodeURIComponent(e.substr(o+1)):"",r=n.indexOf("[");if(-1===r)t[decodeURIComponent(n)]=i;else{var c=n.indexOf("]",r),s=decodeURIComponent(n.substring(r+1,c));n=decodeURIComponent(n.substring(0,r)),t[n]||(t[n]=[]),s?t[n][s]=i:t[n].push(i)}}}),t},e.chunkSplit=function(e,o,n){return void 0===o&&(o=3),void 0===n&&(n=" "),(e+="").split("").reverse().join("").match(new RegExp(".{0,"+o+"}","g")).join(n).split("").reverse().join("").trim()},e.preventBodyScrolling=function(e){void 0===e&&(e=!1),document.body[!0===e?"addEventListener":"removeEventListener"]("touchmove",o,!1)}}(window);
"use strict";void 0===window.flexbe_cli&&(window.flexbe_cli={}),window.spaced_cli=window.flexbe_cli,flexbe_cli._init=function(){function e(){if(!flexbe_cli.isInited)if("undefined"!=typeof jQuery){flexbe_cli.init(),flexbe_cli.isInited=!0;var i=["ready"];i.push(flexbe_cli.run.is_touch?"is-touch":"is-pointer"),i.push(flexbe_cli.is_admin?"is-editor":"is-view");try{var l;(l=document.body.classList).add.apply(l,i)}catch(e){document.body.className+=" "+i.join(" ")}flexbe_cli.run.is_screenshoter||(window.onpopstate=function(){flexbe_cli.modal.popstate()}),svg4everybody({polyfill:!flexbe_cli.is_admin&&(flexbe_cli.run.is_ie||flexbe_cli.run.is_EDGE)})}else setTimeout(e,10)}["complete","loaded"].includes(document.readyState)?e():document.addEventListener("DOMContentLoaded",function(){e()}),window.addEventListener("load",function(){e(),flexbe_cli.isLoaded=!0})};
"use strict";flexbe_cli.events={init:function(){$.observable=function(t){var i={_JQInit:function(){this._JQ=$(this)},emit:function(t,i){return!this._JQ&&this._JQInit(),this._JQ.trigger(t,i),this},once:function(t,i){return!this._JQ&&this._JQInit(),this._JQ.one(t,i),this},on:function(t,i){return!this._JQ&&this._JQInit(),this._JQ.bind(t,i),this},off:function(t,i){return!this._JQ&&this._JQInit(),this._JQ.unbind(t,i),this}};return"object"!=typeof t&&(t=this),Object.keys(i).forEach(function(n){t[n]=i[n].bind(t)}),i},$.observable(this)}};
"use strict";flexbe_cli.run={init:function(){this.deviceInfo()},deviceInfo:function(){var i=navigator.userAgent.toLowerCase();this.is_screen_tablet=window.innerWidth>=768&&window.innerWidth<=1024,this.is_screen_tablet_s=window.innerWidth>=570&&window.innerWidth<768,this.is_screen_mobile=window.innerWidth<570,this.is_screen_mobile_s=window.innerWidth<350,this.is_screen_all_mobile=this.is_screen_tablet_s||this.is_screen_mobile,this.is_screen_small_pc=window.innerWidth>1024&&window.innerWidth<1200,this.is_screen_pc=window.innerWidth>=1200,this.is_touch="ontouchstart"in window,this.is_pointer=!this.is_touch,this.is_bot=/bot|aolbuild|bingpreview|msnbot|baidu|duckduckgo|mediapartners-google|teoma|slurp/gi.test(i),this.is_mobile=-1!==i.indexOf("mobile")||this.is_screen_mobile||this.is_screen_tablet_s,this.is_desktop=!this.is_mobile,this.is_webkit=-1!==i.indexOf("webkit"),this.is_safari=-1!==i.indexOf("safari")&&i.match(/version\/(\d+)/),this.is_firefox=-1!==i.indexOf("firefox"),this.is_mobile_ie=-1!==i.indexOf("iemobile"),this.is_ie=-1!==i.indexOf("trident")||-1!==i.indexOf("msie"),this.is_EDGE=-1!==i.indexOf("edge"),this.is_OSX=/iPad|iPhone|iPod|Macintosh/gi.test(i),this.is_android=-1!==i.indexOf("android"),this.is_ios=this.is_touch&&this.is_mobile&&this.is_OSX,this.is_screenshoter=i.indexOf("slimerjs")>-1||i.indexOf("phantomjs")>-1,this.is_screen_mobile?this.device_type="mobile":this.is_screen_tablet_s||this.is_screen_tablet?this.device_type="tablet":this.device_type="desktop"}};
"use strict";function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(t[l]=i[l])}return t}).apply(this,arguments)}flexbe_cli.lib={init:function(){this.lg.init()},lg:{init:function(){var t=this,e=".lg-container, .b_block, .m_modal, .w_widget";flexbe_cli.is_admin||99==flexbe_cli.theme_id||(this.isOpen=!1,$(window).one("load.lightbox",function(){t.loaded||t.require()}),$(document).on("click.lightbox","[data-lg]",function(i){i.preventDefault();var l=$(i.currentTarget),n=l.closest(e),o=l.attr("href"),a="0"!==n.attr("data-loop"),r=!n.attr("data-lg-single"),s=n.find("[data-lg]").filter(function(t,i){var l=$(i).closest(e),o=l.is(n),a=l.closest(".swiper-slide-duplicate").length;return o&&!a}).toArray().map(function(t){var e,i=$(t),l=i.attr("href"),n=i.attr("data-sub-html");return e=n?i.find(n).html():i.attr("alt")||i.find("img").attr("alt")||"",{src:l,subHtml:e}}),c=s.findIndex(function(t){return t.src===o})||0;t.openGallery({index:c,dynamicEl:s,enableSlide:r,loop:a})}),$(window).on("popstate.lightbox",function(){var e=history.state||{};e.lg?t.openGallery(e.lg):t.closeGallery()}),history.state&&history.state.lg&&this.openGallery(history.state.lg))},openGallery:function(t){var e=this;if(void 0===t&&(t={}),0!==t.dynamicEl.length){this.$lg=$("<div/>");var i=this.$lg,l=_extends({index:0,dynamicEl:[],dynamic:!0,subHtmlSelectorRelative:!0,getCaptionFromTitleOrAlt:!0,slideEndAnimation:!1,swipeThreshold:30,counter:!0,closable:!0,download:!1,easing:"ease-out",hideBarsDelay:1e3,zoomIcons:!1,actualSize:!1,enableSlide:!0,loop:!0},t);l.index<=0&&(l.index=0),this.require(function(){i.lightGallery(l)}),i.on("onBeforeOpen.lg",function(){e.isOpen=!0,n()}),i.on("onBeforeClose.lg",function(){history.state&&history.state.lg&&history.back(),e.isOpen=!1}),i.on("onBeforeSlide.lg",function(t,e,i){l.index=i,n()})}function n(){var t=history.state,e=l;t&&t.lg?history.replaceState({lg:e},null,"#image-"+(e.index+1)):history.pushState({lg:e},null,"#image-"+(e.index+1))}},closeGallery:function(){var t=this.$lg&&this.$lg.data("lightGallery");t&&t.destroy()},require:function(t){var e=this;$("[data-lg]").length&&flexbe_cli.require(["/_s/lib/jquery/lightGallery/css/lightgallery.min.css?1","/_s/lib/jquery/lightGallery/js/lg-spaced-bundle.min.js?1"],function(){e.loaded||(e.loaded=!0,$(document).off("click.beforeLoadedLg")),"function"==typeof t&&t()})}}};
"use strict";!function(){var e=[];flexbe_cli.require=function(i,t,n,r){if(void 0===i&&(i=""),void 0===t&&(t=function(){}),void 0===n&&(n=15e3),void 0===r&&(r=!1),i&&0!==i.length||t(!1),!r){"string"==typeof i&&(i=[i]);var o=0,c=function(n){var r=i.every(function(i){return"boolean"==typeof e[i]});o+=1,r&&o===i.length&&t(n)};return Array.isArray(i)&&i.forEach(function(e){flexbe_cli.require(e,c,n,!0)}),!1}if(!0===e[i])t(!0);else if(Array.isArray(e[i]))e[i].push(t);else{var s,u=!1,d=function(t){if(void 0===t&&(t=!0),!u){u=!0,clearTimeout(s);var n=e[i];e[i]=t,n.forEach(function(e){"function"==typeof e&&e(t)})}};if(e[i]=[t],/\.css(\?.*)?$/.test(i)){var a=document.createElement("link");a.onerror=d.bind(this,!1),a.onload=d.bind(this,!0),s=setTimeout(d.bind(this,"timeout"),n),a.rel="stylesheet",a.href=i,document.body.appendChild(a)}else{var f=document.createElement("script");f.onload=d.bind(this,!0),f.onerror=d.bind(this,!1),s=setTimeout(d.bind(this,"timeout"),n),f.async=!0,f.src=i,document.body.appendChild(f)}}}}();
"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}flexbe_cli.locale=_extends({language:"en",country:"US",currency:{code:"USD",symbol:"$"},translation:{},currency_format:{},init:function(e){var r=this;void 0===e&&(e="body"),$("[data-lang]",e).each(function(e,t){var a=$(t).attr("data-lang"),n=$(t).attr("data-lang-content"),c=String(r.tr(a));$(t).html(c.replace(/%s/,n))})},tr:function(e){if(e){var r=/^currency/.test(e)?this.currency:this.translation;return String(e).replace(/^currency\./,"").split(".").reduce(function(e,r){return e&&e[r]},r)||""}},parseMoney:function(e,r){void 0===r&&(r=2);var t=(e=String(e).replace(/,/g,".").replace(/ /g,"").replace(/(?!^)\-/g,"").replace(/^\./g,"0.")).replace(/[^\d\.]/g,""),a=((t.match(new RegExp("\\.\\d{1,"+r+"}$"))||[])[0]||"").replace(/\D/g,""),n=t.replace(new RegExp("\\."+a+"$"),"");n=parseInt(n.replace(/[^\d-]/g,""),10)||0,parseInt(a,10)||(a="");var c=parseFloat(a?n+"."+a:n);return/^-/.test(e)?-c:c},formatMoney:function(e,r,t){void 0===r&&(r=this.currency_format),void 0===t&&(t=this.currency),e=parseFloat(e);var a=r.str,n=r.d,c=Math.abs(e)>=1e4?r.t:"",o=r.d_force||parseInt(e,10)!==e?t.decimals:0,i=this.numberFormat(Math.abs(e),o,n,c),l=i;return a&&(l=a.replace(":value",i).replace(":symbol",t.symbol)),e<0&&(l="-"+l),l.trim()},numberFormat:function(e,r,t,a){var n,c;return void 0===r&&(r=2),void 0===t&&(t=","),void 0===a&&(a="."),isNaN(r=Math.abs(r))&&(r=2),(c=(n=parseInt(e=(+e||0).toFixed(r),10)+"").length)>3?c%=3:c=0,(c?n.substr(0,c)+a:"")+n.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+a)+(r?t+Math.abs(e-n).toFixed(r).replace(/-/,0).slice(2):"")}},flexbe_cli.locale);
"use strict";flexbe_cli.resize={width:window.innerWidth,height:window.innerHeight,oldWidth:window.innerWidth,oldHeight:window.innerHeight,init:function(){this.simulateWindowResized(),this.simulateDocumentResize()},simulateWindowResized:function(){var i,e=this,t=this.oldWidth,n=this.oldHeight;$(window).on("resize orientationchange",function(){e.width=window.innerWidth,e.height=window.innerHeight,clearTimeout(i),i=setTimeout(function(){e.oldWidth=t,e.oldHeight=n,t=e.width,n=e.height,flexbe_cli.run.deviceInfo(),$(window).trigger("resized")},80)})},simulateDocumentResize:function(){var i=this;this.documentHeight=document.body.scrollHeight;var e=flexbe_cli.is_admin?500:150;setInterval(function(){!function(){if(!flexbe_cli.scroll.inScroll){var e=document.body.scrollHeight;Math.abs(e-i.documentHeight)>3&&(i.documentHeight=e,$(window).trigger("documentresize"))}}()},e)}};
"use strict";flexbe_cli.scroll={inScroll:!1,latest:window.pageYOffset,init:function(){var t=this;this.latest=window.pageYOffset,document.addEventListener("scroll",function(){t.latest=window.pageYOffset,t.inScroll=!0},{passive:!0}),document.addEventListener("scrollend",function(){t.inScroll=!1},{passive:!0}),this.scrollImprovement.init()},scrollImprovement:{scrollTimer:0,pointerState:!1,init:function(){this.createStopScrollEvent(),this.pointerEvents()},createStopScrollEvent:function(){var t=this,e=flexbe_cli.scroll.latest;document.addEventListener("scroll",function(){var n=e>flexbe_cli.scroll.latest?"up":"down";clearTimeout(t.scrollTimer),t.scrollTimer=setTimeout(function(){e=flexbe_cli.scroll.latest,document.dispatchEvent(new CustomEvent("scrollend",{detail:{direction:n}}))},200)},{passive:!0})},pointerEvents:function(){var t=this;flexbe_cli.is_admin||(document.addEventListener("scroll",function(){t.pointerState||(t.pointerState=!0)},{passive:!0}),document.addEventListener("scrollend",function(){t.pointerState&&(t.pointerState=!1)}))}}};
"use strict";flexbe_cli.stat={u_id:0,time:0,goals:{quiz:"quiz_start",modal:"modal_open",modal_form:"form_open",modal_product:"product_show",modal_done:"order_done",cart:"add_to_cart",link:"link_open",file:"file_load",close:"modal_close"},init:function(){var e=getCookie("user_id");if(flexbe_cli.is_admin||flexbe_cli.run.is_bot||flexbe_cli.run.is_screenshoter||!flexbe_cli.p_id||e)return!1;var t=getCookie("f_uid");t?(this.u_id=t,this.user_visit()):this.user_create(),this.AB.init(),this.ecommerce.init()},getGoal:function(e,t){return"modal"===e&&(/form/.test(t)&&(e="modal_form"),/done/.test(t)?e="modal_done":/product/.test(t)?e="modal_product":/quiz/.test(t)&&(e="quiz")),this.goals[e]||!1},reach_goal:function(e,t){if(t=void 0!==t?t:{},!flexbe_cli.is_admin)try{if(flexbe_cli.yandex_id)var i=setInterval(function(){if("undefined"==typeof Ya||"object"!=typeof Ya._metrika.counter)return!1;clearInterval(i),Ya._metrika.counter.reachGoal(e,t)},50);"function"==typeof ga&&ga("send","event",e,"send")}catch(e){}},get_utm:function(){var e=function(e){if(""===e)return{};for(var t={},i=0;i<e.length;++i){var o=e[i].split("=");2==o.length&&(t[o[0]]=decodeURIComponent(o[1].replace(/\+/g," ")))}return t}(window.location.search.substr(1).split("&")),t={};return $.each(e,function(e,i){"utm_"===e.substring(0,4)&&(t[e]=i)}),document.referrer&&(t.url=document.referrer),t},user_create:function(){var e=this;$.ajax({url:"/mod/stat/",type:"POST",dataType:"json",data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,utm_data:this.get_utm(),device:{type:flexbe_cli.run.device_type,width:window.innerWidth,browser:navigator.userAgent}}}).done(function(t){"object"==typeof t&&null!==t&&t.u_id?(setCookie("f_uid",t.u_id,{Path:"/"}),e.u_id=t.u_id):console.warn("cookie visit not setted",t)})},user_visit:function(){$.ajax({url:"/mod/stat/visit/",type:"POST",dataType:"json",data:{s_id:flexbe_cli.s_id,group_id:flexbe_cli.group_id,p_id:flexbe_cli.p_id,u_id:this.u_id}}).done(function(e){e.v_id||console.warn("cookie visit not created",e)})},ecommerce:{currencyCode:"RUB",inited:!1,init:function(){this.inited=!0,this.currencyCode=flexbe_cli.locale.currency.code,window.dataLayer||(window.dataLayer=[])},add:function(e,t,i,o){this.inited&&window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,add:{products:[{id:e,name:t,price:o,quantity:i}]}}})},remove:function(e,t){this.inited&&window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,remove:{products:[{id:e,name:t}]}}})},purchase:function(e,t){if(void 0===t&&(t=!1),this.inited&&(e||0!=e.length)){t||(t=Math.ceil(1e4*Math.random()));try{window.dataLayer.push({ecommerce:{currencyCode:this.currencyCode,purchase:{actionField:{id:t},products:e.map(function(e){return{id:e.id,name:e.title,price:e.price,quantity:e.count}})}}})}catch(e){}}}},AB:{proccess:{},init:function(){var e=this;flexbe_cli.events.off("entity_event.abstat").on("entity_event.abstat",function(t,i){if(i&&"screen"===i.type&&i.state&&i.first&&i.core&&i.core.abtestVariant){var o=i.core,n=o.abtestId,r=o.abtestVariant;e.fixView(n,r)}})},setcookie:function(e){setCookie("f_ab",JSON.stringify(e),{expires:604800,path:"/",domain:document.location.hostname})},getcookie:function(){var e=!0,t=getCookie("f_ab");if(t)try{t=JSON.parse(decodeURIComponent(t)),e=!1}catch(t){console.warn("cant parse abtest cookie",t),e=!0}return e&&(t={view:{},lead:[]}),t},fixView:function(e,t){var i=this;if(void 0===e||void 0===t||"a"!==t&&"b"!==t)return!1;void 0!==this.getcookie().view[e]||this.proccess[e]||(this.proccess[e]=!0,$.ajax({url:"/mod/stat/abtest",type:"POST",dataType:"json",data:{test_id:e,variant:t,s_id:flexbe_cli.s_id,p_id:flexbe_cli.p_id}}).done(function(o){if(i.proccess[e]=!1,1==o.status){var n=i.getcookie();n.view[e]=t,i.setcookie(n)}}))},fixLead:function(e){if(flexbe_cli.bill&&1!=flexbe_cli.bill.abtest)return!1;if(e.length>0){var t=this.getcookie(),i=$.merge(t.lead,e);t.lead=$.grep(i,function(e,t){return $.inArray(e,i)===t}),this.setcookie(t)}}}};
"use strict";var EntityCore=function(){function e(e,t){var i=this;void 0===t&&(t={});var s=$(e),n=s.attr("data-is"),o=s.attr("data-id"),a=s.attr("data-mod-id")||0,r="zone"===n?"e":n[0],h=s.attr("data-"+r+"-id"),c=s.data(r+"Type")||[],d=s.data("components")||!0;this.require=[],this.$area=s,this.area=s[0],this.$container=this.$area,this.container=this.area,this.$root=s,this.root=s[0],this.is=n,this.id=o,this.template_id=h,this.mod_id=a,this.type=c,this.components=d,this.tween={},this.isVisible=!1,this.isBeside=!1,this.isView=!1,this.isFocused=!1,this.wasVisible=!1,this.wasBeside=!1,this.wasView=!1,this.wasFocused=!1,Object.keys(t).forEach(function(e){var s=t[e];i[e]="object"==typeof s?$.extend(!0,Array.isArray(s)?[]:{},s):s})}var t=e.prototype;return t.onInit=function(){},t.onUpdate=function(){},t.onLoad=function(){},t.onReady=function(){},t.onBeside=function(){},t.onFocus=function(){},t.onScreen=function(){},t.onView=function(){},t.onMsg=function(){},t.onResize=function(){},t.onOpen=function(){},t.onClose=function(){},t.getNested=function(){if(4!==flexbe_cli.theme_id)return[];if(this._nestedElementsCache)return this._nestedElementsCache;var e=$(".content-zone, .element-item",this.area).toArray().map(function(e){return flexbe_cli.element.bind(e).core||!1}).filter(function(e){return e});return flexbe_cli.is_admin||(this._nestedElementsCache=e),e},t.init=function(e){var t=this,i=this.inited?"update":"init";"init"===i?this._onInit(e):"update"===i&&this._onUpdate(e),("init"===i||e.templateRendered)&&flexbe_cli.require(this.require,function(){t._onLoad(e)})},t._onInit=function(e){this.inited=!0,this._tween(),this.onInit(e),flexbe_cli.events.emit("entity_event",{type:"inited",core:this,params:e})},t._onLoad=function(e){this.loaded=!0,this.onLoad(e),this.onReady(e),this.require.length&&this._tween({force:!0})},t._onUpdate=function(e){this.updated=!0,(e.templateRendered||e.styleRendered)&&this._tween(),this.onUpdate(e),flexbe_cli.events.emit("entity_event",{type:"updated",core:this,params:e})},t._onResize=function(e){(this._tween()||e.force)&&(this.onResize(e),flexbe_cli.events.emit("entity_event",{type:"resize",core:this,params:e}),this.$area.trigger("onResize",{}))},t._onMsg=function(e,t){this.onMsg(e,t)},t._onFocus=function(e){var t=e.state;if(this.isFocused!==t){var i=t&&!this.wasFocused;this.isFocused=t,t&&(this.wasFocused=!0),this.onFocus(t,i),flexbe_cli.events.emit("entity_event",{type:"focus",core:this,state:t,first:i}),this.$area.trigger("onFocus",{state:t,first:i})}},t._onScreen=function(e){var t=e.state;if(this.isVisible!==t){var i=t&&!this.wasVisible;this.isVisible=t,t&&(this.wasVisible=!0),this.onScreen(t,i),flexbe_cli.events.emit("entity_event",{type:"screen",core:this,state:t,first:i}),this.$area.trigger("onScreen",{state:t,first:i})}},t._onView=function(e){var t=e.state;if(this.isView!==t){var i=t&&!this.wasView;this.isView=t,t&&(this.wasView=!0),this.onView(t,i),flexbe_cli.events.emit("entity_event",{type:"view",core:this,state:t,first:i}),this.$area.trigger("onView",{state:t,first:i})}},t._onBeside=function(e){var t=e.state;if(this.isBeside!==t){var i=t&&!this.wasBeside;this.isBeside=t,t&&(this.wasBeside=!0),this.onBeside(t,i),flexbe_cli.events.emit("entity_event",{type:"beside",core:this,state:t,first:i}),this.$area.trigger("onBeside",{state:t,first:i})}},t._tween=function(){var e=this.container||this.area,t=e.offsetWidth,i=e.offsetHeight,s=t!==this.tween.width||i!==this.tween.height;return this.tween.width=t,this.tween.height=i,s},t._onOpen=function(e){this._tween(),this.onOpen(e),flexbe_cli.events.emit("entity_event",{type:"opened",core:this,data:e}),this.$area.trigger("onOpen",e)},t._onClose=function(){this.onClose(),flexbe_cli.events.emit("entity_event",{type:"closed",core:this}),this.$area.trigger("onClose")},e}();
"use strict";function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var BlockCore=function(e){function t(t,i){var n;return(n=e.call(this,t,i)||this).is="block",n.$block=n.$area,n.$container=n.$area.find(".container-fluid"),n.container=n.$container[0],n.abtestVariant=n.$area.attr("data-abtest-variant"),n.abtestId=n.abtestVariant&&n.$area.attr("data-abtest-id"),n}_inheritsLoose(t,e);var i=t.prototype;return i._onInit=function(t){flexbe_cli.block.fixCoverHeight(this.$area),e.prototype._onInit.call(this,t)},i._onUpdate=function(t){t.templateRendered&&flexbe_cli.block.fixCoverHeight(this.$area),e.prototype._onUpdate.call(this,t)},i._tween=function(e){var t=(void 0===e?{}:e).force,i=void 0!==t&&t,n=this,o=this.area.offsetWidth,r=this.area.offsetHeight,s=Math.max(0,this.area.offsetTop),a=o!==this.tween.width||r!==this.tween.height;if(this.tween.width=o,this.tween.height=r,this.tween.start=s,this.tween.end=s+r,this.tween.color="#999",this.container){var l=this.container.getAttribute("data-contrast");if(l)this.tween.color="light"===l?"#FFF":"#1B1B1C";else{var h=this.$area.find(".container")[0];this.tween.color=h&&getComputedStyle(h).color||"#FFF"}}return i&&(this.isVisible=null,this.isBeside=null,this.isView=null,this.isFocused=null),c(),$(window).off("scroll.tween_"+this.id).on("scroll.tween_"+this.id,$.throttle(c,50)),a;function c(){if(!n.inited)return!1;var e,t,i,o=Math.max(flexbe_cli.resize.height-r,0),s=1/n.tween.height*(flexbe_cli.scroll.latest-n.tween.start),a=(e=flexbe_cli.scroll.latest+flexbe_cli.resize.height/2,t=n.tween.start+n.tween.height/2,(e-t+n.tween.height/2)/n.tween.height),l=(i=n.tween.start-flexbe_cli.resize.height,1/(n.tween.end-i)*(flexbe_cli.scroll.latest-i));n.tween.fix=o,n.tween.position=s,n.tween.positionAbs=l,n.tween.positionCenter=a;var h=a>0&&a<1,c=function(){if(!n.tween.width)return!1;var e=flexbe_cli.resize.height>=n.tween.height?n.tween.height/4:flexbe_cli.resize.height/3;return flexbe_cli.scroll.latest+flexbe_cli.resize.height>n.tween.start+e&&flexbe_cli.scroll.latest<n.tween.end-e}(),w=function(){if(!n.tween.width)return!1;return n.tween.positionAbs>=0&&n.tween.positionAbs<=1}(),f=function(){if(!n.tween.width)return!1;return n.tween.positionAbs>=-.2&&n.tween.positionAbs<=1.2}();n.tween.focus=h,n.tween.view=c,n.tween.onscreen=w,n.tween.beside=f,n._onBeside({state:f}),n._onScreen({state:w}),n._onView({state:c}),n._onFocus({state:h})}},t}(EntityCore);
"use strict";function _inheritsLoose(o,e){o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.__proto__=e}var ModalCore=function(o){function e(e,t){var s;return(s=o.call(this,e,t)||this).is="modal",s.isOpen=!1,s.$modal=s.$area,s.$list=flexbe_cli.modal.$list,s}_inheritsLoose(e,o);var t=e.prototype;return t.open=function(o,e){var t=this;void 0===e&&(e={}),this.isOpen=!0,flexbe_cli.block.pushOverlay("modal",!0),this.lastOptions=e,this.lastScroll=flexbe_cli.scroll.latest;var s=this.$area.find(".modal-data > ._anchor").attr("name")||this.id;flexbe_cli.lockPopstate=!0,history.pushState(null,null,"#"+s),flexbe_cli.lockPopstate=!1,this.$list.addClass("show"),this.$area.addClass("show"),setTimeout(function(){t.$list.addClass("overlay"),t._onOpen(o),t._onScreen({state:!0}),t._onBeside({state:!0}),t._onView({state:!0}),t._onFocus({state:!0}),"function"==typeof e.onOpen&&e.onOpen(t)},30),$("body").addClass("is-modal-open"),flexbe_cli.run.is_desktop?$("body").addClass("overflow"):flexbe_cli.run.is_screen_all_mobile&&$("body, html").scrollTop(0)},t.close=function(o){var e=(void 0===o?{}:o).from,t=this.lastOptions;this.lastOptions={},this.isOpen=!1,flexbe_cli.block.removeOverlay("modal"),/^#{1,2}/.test(location.hash)&&(flexbe_cli.lockPopstate=!0,history.replaceState(null,null,"#"),flexbe_cli.lockPopstate=!1),this.$area.removeClass("show"),e||($("body").removeClass("overflow"),this.$list.removeClass("show overlay")),this._onClose(),this._onScreen({state:!1}),this._onBeside({state:!1}),this._onView({state:!1}),this._onFocus({state:!1}),"function"==typeof t.onClose&&t.onClose(this),$("body").removeClass("is-modal-open"),flexbe_cli.run.is_screen_all_mobile&&$("body, html").scrollTop(this.lastScroll)},e}(EntityCore);
"use strict";function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var WidgetCore=function(t){function e(e,o){var r;return(r=t.call(this,e,o)||this).is="widget",r.$widget=r.$area,r}return _inheritsLoose(e,t),e.prototype._tween=function(){},e}(EntityCore);
"use strict";flexbe_cli.components={instances:{},classes:{},helpers:{},init:function(){var e=this,t=this.instances;this.links(),flexbe_cli.locale.init(),flexbe_cli.events.on("entity_event.components_init",function(n,o){if(!(o&&o.type&&o.core&&o.core.id))return!1;var i=o.core,a=i.isClone?i.id+"_clone":i.id,r=t[a]||[];"inited"===o.type||"updated"===o.type&&o.params.templateRendered?(e.initComponents({core:i,reason:o.type,params:o.params}),flexbe_cli.locale.init(i.area)):/resize/.test(o.type)?r.forEach(function(e){return e._onResize({core:i,reason:o.type,params:o.params})}):/screen/.test(o.type)?r.forEach(function(e){return e._onView({state:o.state})}):/focus/.test(o.type)?r.forEach(function(e){return e._onFocus({state:o.state})}):/beside/.test(o.type)?r.forEach(function(e){return e._onBeside({state:o.state})}):/open/.test(o.type)?r.forEach(function(e){return e._onOpen({data:o.data})}):/close/.test(o.type)&&r.forEach(function(e){return e._onClose({data:o.data})})}),$(window).off("load.core_components").one("load.core_components",function(){Object.values(t).forEach(function(e){e.forEach(function(e){return e._onPageLoad()})})})},initComponents:function(e){var t=this,n=void 0===e?{}:e,o=n.core,i=n.reason,a=void 0===i?"inited":i,r=n.force,c=void 0!==r&&r,s=o.$area,l=o.isClone?o.id+"_clone":o.id,f=o.components,m=!1;if(!0===f?m="[data-component]":Array.isArray(f)&&(m=f.map(function(e){return'[data-component^="'+e+'"]'}).join(", ")),m){var d=s.find(m).toArray(),p={};this.instances[l]=d.map(function(e){var n=[],i=String(e.getAttribute("data-component")).trim().split(":"),r=i[0],s=i[1];s&&(n=String(s).replace(/^\[|\]$/g,"").split(",")),void 0===p[r]&&(p[r]=0);var l=p[r];if(p[r]+=1,c&&e.componentInstance)"function"==typeof e.componentInstance.destroy&&e.componentInstance.destroy(),delete e.componentInstance;else if(e.componentInstance)return e.componentInstance.index=l,e.componentInstance;var f=t.classes[r];if("function"==typeof f){var m=new f({args:n,component:e,index:l,core:o,reason:a});if(m instanceof BaseComponent)return e.componentInstance=m,m._onInit(),o.isVisible&&m._onView({state:!0}),m}return!1}).filter(function(e){return e})}if(this.instances[l]&&!this.instances[l].length)return delete this.instances[l],!1},links:function(e){void 0===e&&(e=".container-list, .modal-list, .widget-list, header, footer"),$(e).on("click.component-links","a[href], a[data-action]",function(e){var t=$(e.currentTarget).attr("href"),n=$(e.currentTarget).attr("data-action"),o=$(e.currentTarget).attr("target");if(t||n){if(/#{1,2}.+/.test(t)){if(1===flexbe_cli.theme_id)$(e.currentTarget).closest(".mobile-menu").removeClass("active");else $("body > .mobile-menu").trigger("close");$("body").removeClass("overflow fixed");var i=(t=t.replace(/^(?:\.\/)#{2}/,"#").trim()).trim().split("#"),a=""===i[0]||"./"===i[0],r=a?location.pathname:i[0],c=i[i.length-1];if(!a&&"_blank"===o||r!==location.pathname)return!0;var s=flexbe_cli.block.$list.find(".b_"+c+', ._anchor[name="'+c+'"]').eq(0),l=flexbe_cli.modal.$list.find(".m_"+c+', ._anchor[name="'+c+'"]').eq(0);if(flexbe_cli.events.emit("mobilemenu_command",{command:"close"}),s.length){var f=s.closest(".b_block");flexbe_cli.events.emit("modal_command",{command:"close"}),flexbe_cli.block.scrollTo(f),history.replaceState(null,null,"#"+c)}else if(l.length){if(flexbe_cli.is_admin)return!0;var m=l.closest(".m_modal").data("id");flexbe_cli.events.emit("modal_command",{command:"open",id:m,data:{}})}e.preventDefault(),e.stopPropagation()}else if("button"===n){var d=$(e.currentTarget).closest(".content-zone, [data-item-id]").first().find(".component-button");d[0]&&d[0].click()}return t&&flexbe_cli.is_admin&&(e.preventDefault(),e.stopPropagation()),!0}})}};
"use strict";var BaseComponent=function(){function i(i){var n=i.component,t=i.index,o=i.core,s=i.reason;this.core=o,this.owner=o.area,this.root=o.root,this.index=t||0,this.component=n,this.$component=$(n),this.require=[],this.isPageLoaded=flexbe_cli.isLoaded||!1,this.isUpdated="updated"===s,this.isLoaded=!1,this.isInited=!1,this.isViewed=!1,this.isBesided=!1,this.inView=!1,this.inBeside=!1}var n=i.prototype;return n.onInit=function(){},n.onLoad=function(){},n.onView=function(){},n.onBeside=function(){},n.onPageLoad=function(){},n.onResize=function(){},n.onFocus=function(){},n.onOpen=function(){},n.onClose=function(){},n._onInit=function(){var i=this;"function"==typeof this.onInit&&this.onInit(),flexbe_cli.require(this.require,function(){i._onLoad()}),this.isInited=!0},n._onLoad=function(){"function"==typeof this.onLoad&&this.onLoad(),this.isLoaded=!0},n._onView=function(i){var n=i.state;this.inView=n,this.onView({state:n,isFirst:n&&!this.isViewed}),n&&(this.isViewed=!0)},n._onFocus=function(i){var n=i.state;this.inFocus=n,this.onFocus({state:n,isFirst:n&&!this.isFocused}),n&&(this.isFocused=!0)},n._onResize=function(i){this.onResize(i)},n._onOpen=function(i){this.onOpen(i)},n._onClose=function(i){this.onClose(i)},n._onBeside=function(i){var n=i.state;this.inBeside=n,this.onBeside({state:n,isFirst:n&&!this.isBesided}),n&&(this.isBesided=!0)},n._onPageLoad=function(){this.onPageLoad(),this.isPageLoaded=!0},i}();
"use strict";function _assertThisInitialized(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _inheritsLoose(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}!function(){var i=function(){function i(i,t,e){var a=this;this.id=i,this.params=e,this.pending=!1,this.visible=!1,this.size=!1,this.imSize={w:0,h:0},this.$outer=$(".parallax-outer",t),this.overlay=$(".overlay",t).get(0),this.canvas=$("canvas",this.$outer).get(0),this.offScreen=document.createElement("canvas"),this.ovOp=+$(this.overlay).css("opacity"),this.factor=1===e.parallax||2===e.parallax?.3:0,this.zoomRatio=3===e.parallax||4===e.parallax?.2:0,this.zoomType=3===e.parallax||4===e.parallax?2:0,this.zoomD=3===e.parallax?.5:4===e.parallax?1:0,this.fadeout=1===e.parallax?0:3===e.parallax?.5:1;var o=window.devicePixelRatio>=1.5?1960/window.devicePixelRatio:1960,s=this.$outer.width(),n=this.$outer.height(),h=this.$outer.offset()||{};this.blSize={w:s<=o?s:o},this.blSize.r=this.blSize.w/s,this.blSize.h=this.blSize.r*n,this.blSize.x=this.blSize.r*h.top,this.winSize={w:$("window").width()*this.blSize.r,h:$("window").height()*this.blSize.r},this.blSizeOr={w:s,h:n,x:h.top},this.offCtx=this.offScreen.getContext("2d",{alpha:!1}),this.canvas.width=0,this.canvas.height=0,this.ctx=this.canvas.getContext("2d",{alpha:!1}),this.img=document.createElement("img"),this.position={x:+this.$outer.data("bg-pos-x").replace("%","")/100,y:+this.$outer.data("bg-pos-y").replace("%","")/100},this.dispatchEvents(),this.img.onload=function(){a.loaded=!0,a.imSize={w:a.img.width,h:a.img.height},a.imSize.r=a.imSize.h/a.imSize.w,a.updateCanvasSource(),setTimeout(function(){a.$outer.addClass("ready")},30)},this.img.src=this.$outer.attr("data-image")}var t=i.prototype;return t.dispatchEvents=function(){var i=this;$(window).off("resized."+this.id+" documentresize."+this.id).on("resized."+this.id+" documentresize."+this.id,function(){i.updateCanvasSource()}),$(window).off("scroll.component-bg-"+this.id).on("scroll.component-bg-"+this.id,function(){i.pending||(i.pending=!0,i.updateInst())}),flexbe_cli.events.off("editor_change.bg_"+this.id).on("editor_change.bg_"+this.id,function(t,e){e.entity&&e.entity.id==i.id&&"editor_settings"===e.reason&&(i.ovOp=.01*e.entity.data.background.opacity,i.pending||(i.pending=!0,i.updateInst()))}),flexbe_cli.events.off("layout_change.bg_"+this.id).on("layout_change.bg_"+this.id,function(t,e){e&&e.test&&e.test.current&&e.test[e.test.current]===i.id&&i.updateCanvasSource()})},t.toggleRendering=function(i){if("boolean"!=typeof i)return!1;i!==this.visible&&(this.visible=i,$(this.overlay).toggleClass("will-change",i))},t.getCosPoint=function(i,t,e){return void 0===e&&(e=1),1-i>e&&(i=e),(1-Math.cos(Math.PI*i*t))/2},t.getZoomCoords=function(i){var t=1===this.zoomType?i:-1===this.zoomType?100-i:2===this.zoomType?100-100*this.getCosPoint(.01*i,2,this.zoomD):0,e={ratio:this.zoomRatio/100*t};return e.w=this.blSize.w*(1+e.ratio),e.h=this.blSize.h*(1+e.ratio),e.x=(e.w-this.canvas.width)/2,e.y=(e.h-this.blSize.h)/2,e},t.draw=function(i,t){var e,a=this;if(this.fadeout&&(e=1-(1-this.ovOp)*this.getCosPoint(.01*t,2,this.fadeout)),this.zoomRatio){var o=this.getZoomCoords(t);requestAnimationFrame(function(){a.overlay.style.opacity=e,a.ctx.drawImage(a.offScreen,Math.ceil(-1*o.x),Math.ceil(i*a.factor-a.winSize.h*a.factor-o.y),o.w,o.h),a.pending=!1})}else{var s=Math.ceil(i*this.factor-this.winSize.h*this.factor);requestAnimationFrame(function(){a.overlay.style.opacity=e,a.ctx.drawImage(a.offScreen,0,s),a.pending=!1})}},t.updateInst=function(){if(this.winSize.x=(window.scrollY||window.pageYOffset)*this.blSize.r,this.winSize.x+this.winSize.h>this.blSize.x-200&&this.winSize.x<this.blSize.x+this.blSize.h){this.toggleRendering(!0);var i=this.winSize.x+this.winSize.h-this.blSize.x,t=100-i/(this.blSize.h+this.winSize.h)*100;this.draw(i,t)}else this.toggleRendering(!1),this.pending=!1},t.prerender=function(){this.loaded&&(this.fitToOuter(),this.offScreen.width=this.blSize.w,this.offScreen.height=this.zoomRatio?this.blSize.h:Math.ceil(this.size.offH),this.drawOffscreenImage(this.position.x,this.position.y))},t.updateCanvasSource=function(){this.prerender(),this.updateInst()},t.drawOffscreenImage=function(i,t){(i="number"==typeof i?i:.5)<0&&(i=0),(t="number"==typeof t?t:.5)<0&&(t=0),i>1&&(i=1),t>1&&(t=1);var e,a,o,s,n=this.offCtx.canvas.width,h=this.offCtx.canvas.height;h/n<=this.imSize.r?(o=n,e=0,a=((s=n*this.imSize.r)-h)*t*-1):(s=h,a=0,e=((o=h/this.imSize.r)-n)*i*-1),this.offCtx.drawImage(this.img,e,a,o,s)},t.fitToOuter=function(){var i=window.devicePixelRatio>=1.5?1600:1960;this.blSize={w:this.$outer.width()<=i?this.$outer.width():i},this.blSize.r=this.blSize.w/this.$outer.width(),this.blSize.h=this.blSize.r*this.$outer.height(),this.blSize.x=this.blSize.r*this.$outer.offset().top,this.winSize={w:$(window).width()*this.blSize.r,h:$(window).height()*this.blSize.r},this.canvas.width=this.blSize.w,this.canvas.height=this.blSize.h,this.canvas.style.transform="scale("+1/this.blSize.r+")";var t,e=Math.max(this.winSize.h,this.blSize.h),a=e-(e-Math.min(this.winSize.h,this.blSize.h))*(this.blSize.h>this.winSize.h?this.factor:1-this.factor),o=a/this.blSize.w;(t=this.imSize.r>=o?{w:this.blSize.w,h:this.blSize.w*this.imSize.r}:{h:a,w:a/this.imSize.r}).offH=a,t.x=(t.w-this.blSize.w)/2,this.size=t},t.destroy=function(){this.destroyed=!0,$(window).off("resize."+this.id+" documentresize."+this.id),$(window).off("scroll.component-bg-"+this.id),flexbe_cli.events.off("editor_change.bl.bg_"+this.id),this.$outer.removeClass("ready"),this.offScreen.remove(),this.img.remove()},i}(),t=function(t){function e(){for(var i,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];var s=_assertThisInitialized(i=t.call.apply(t,[this].concat(a))||this).$component;return i.data={type:s.data("type")||"color",parallax:s.data("parallax")||0,video:s.data("video")||!1,videoParallaxFactor:.6},i.data.parallax&&flexbe_cli.run.is_mobile&&(flexbe_cli.run.is_screen_mobile_s||flexbe_cli.run.is_screen_all_mobile&&"video"===i.data.type)&&(i.data.parallax=0),i}_inheritsLoose(e,t);var a=e.prototype;return a.onInit=function(){this.loadImage(),this.imageParallaxInit(),this.videoParallaxInit()},a.onView=function(i){if(!i.state||this.isViewed||this.isBesided)return!1;this.playVideo()},a.onBeside=function(i){if(!i.state||this.isViewed||this.isBesided)return!1;this.playVideo()},a.loadImage=function(){if(!flexbe_cli.is_admin){var i,t=this.$component,e=t.find(".image, .parallax-outer"),a=e.find(".loader-image"),o=a.attr("data-src");if(o){var s=new Image;s.onload=n,s.src=o,i=setTimeout(n,1e3)}}function n(){clearTimeout(i),e.css("backgroundImage",""),t.removeClass("loading"),setTimeout(function(){a.remove()},300)}},a.imageParallaxInit=function(){if("image"!==this.data.type||!this.data.parallax)return!1;var t=this.owner,e=this.$component,a=this.data,o=t._core&&t._core.id||t.getAttribute("data-id");"object"==typeof t._bgEffects&&t._bgEffects.destroy(),t._bgEffects=new i(o,e,a)},a.videoParallaxInit=function(){var i=this;if("video"!==this.data.type||!this.data.parallax||!this.owner._core)return!1;var t=$(".image-holder, .video_bg_container",this.$component),e=t.find(".image, .video_bg_player"),a=this.owner._core;flexbe_cli.resize.height<a.tween.height&&a.tween.width>500?t.css("height",a.tween.height+"px"):t.css("height","");var o=!1,s=function(){var t=a.tween.start,o=1-(1-i.data.videoParallaxFactor)*(a.tween.height/flexbe_cli.resize.height);o<0&&(o=i.data.videoParallaxFactor/2),e.css("transform","translate3d(0, "+-(window.pageYOffset-t)*o+"px, 0)")};s(),$(window).off("scroll.component-bg-"+a.id).on("scroll.component-bg-"+a.id,function(){!o&&a.tween.onscreen&&(o=!0,requestAnimationFrame(function(){s(),o=!1}))})},a.playVideo=function(){var i=this,t=this.$component,e=this.data,a=e.video;if("video"!==e.type||!a||"youtube"!==a.type||!a.id)return!1;if(flexbe_cli.run.is_mobile||flexbe_cli.run.is_screen_all_mobile)return!1;if(t.data("video_bg_played")){if(a.id===t.data("video_bg_played"))return;this.destroyVideo()}t.data("video_bg_played",a.id),flexbe_cli.require(["/_s/lib/jquery/youtubebackground/jquery.youtubebackground.js"],function(){t.YTPlayer({videoId:a.id,videoURL:a.url,callback:function(){i.videoParallaxInit(),setTimeout(function(){i.videoParallaxInit()},1e3)}})})},a.destroyVideo=function(){var i=this.$component;i.data("ytPlayer")&&i.data("ytPlayer").destroy(),i.removeData("video_bg_played")},e}(BaseComponent);flexbe_cli.components.classes.background=t}();
"use strict";function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t}).apply(this,arguments)}function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}!function(){var t={},e=function(t,e){void 0===e&&(e=function(){});var i=new Image;return i.onload=function(){"function"==typeof i.remove&&i.remove(),e(i)},i.src=t,i},i=function(t,e){var i=t.ext,a=t.id,o=t.name,n=t.resizable,r=Math.max(1,window.devicePixelRatio||1);return e=Math.round(Math.min(2560,e*r)),["/img/"+a,n&&e?"_"+e:"",i?"."+i:"/"+o].join("")},a=function(a){function o(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=a.call.apply(a,[this].concat(i))||this).is="image",t}_inheritsLoose(o,a);var n=o.prototype;return n.onInit=function(){this.isUpdated&&(this.create(),this.set())},n.onView=function(t){if(!t.state)return!1;this.isCreated||this.create(),this.autoSet&&!this.isSet&&this.set()},n.onBeside=function(t){if(!t.state)return!1;this.isCreated||this.create(),this.autoSet&&!this.isSet&&this.set()},n.onResize=function(){this.updateSize(),this.setOverlay()},n.create=function(){var t=this;if(this.isCreated=!0,this.imageLoaded=!!this.$component.attr("data-img-loaded"),this.autoSet=!this.imageLoaded,this.params={},this.img=this.$component.find("img").get(0),this.layer=this.$component.find("[data-img-layer]").get(0)||this.component,this.overlay=this.$component.find(".overlay-container").get(0),this.updateParams(),this.updateSize(),this.img){var e=this.$component.parent();if(e.hasClass("slider-item"))e.closest(".component-slider").attr("data-current-index")==e.attr("data-real-index")||(this.autoSet=!1);this.$component.on("setImage sliderActivate",function(){t.set()})}},n.set=function(t){var a=this;void 0===t&&(t=!1),this.isCreated||this.create(),(t||!this.isSet&&!this.imageLoaded)&&(this.isSet=!0,this.setOverlay(),this.getOptimalSize(function(t){var o=t.width,n=a.params,r=i(n,o);if(flexbe_cli.is_admin)a.setImage(r);else{var s=setTimeout(function(){a.setImage(r)},3e3);e(r,function(){a.setImage(r),clearTimeout(s)})}}))},n.setImage=function(t){var e=this,a=this.params;if(t||(t=i(a)),this.imageLoaded||(this.imageLoaded=!0,requestAnimationFrame(function(){e.$component.removeClass("loading")})),this.img&&this.img.src===t)return!1;if(this.img&&(this.img.src=t),"background"===a.type){var o="url("+t+")",n=a.x+" "+a.y;this.layer.style.backgroundColor="",this.layer.style.backgroundImage=o,this.layer.style.backgroundPosition=n}},n.setOverlay=function(){var t=this.overlay,e=this.componentWidth,i=this.componentHeight;if(t){var a="medium";e<=200||i<=150?a="xsmall":e<=400||i<=250?a="small":e>=650&&i>=400&&(a="large"),t.setAttribute("data-size",a),"hover"===t.getAttribute("data-type")&&$(t).on("mouseenter mouseleave touchstart touchend",function(e){var i=/enter|start/.test(e.type);$(t).toggleClass("hover",i)})}},n.updateParams=function(){var e=this.params,i=this.component,a=this.img;if(!e.id){var o=i.getAttribute("data-img-id");if(t[o])e=_extends({},t[o]);else{e.id=o,e.ext=i.getAttribute("data-img-ext"),e.name=i.getAttribute("data-img-name"),e.proportion=+i.getAttribute("data-img-proportion")/100;var n=e.name.match(/\.(\D{2,4})$/i);n[1]&&e.ext!==n[1]&&(e.ext=n[1]||!1),e.resizable=!["svg","gif"].includes(e.ext)}e.x=i.getAttribute("data-img-x"),e.y=i.getAttribute("data-img-y"),e.type=i.getAttribute("data-img-type"),e.action=i.getAttribute("data-action")}return!e.proportion&&a&&a.src&&(e.proportion=a.naturalHeight/a.naturalWidth),t[e.id]||(t[e.id]=_extends({},e)),this.params=e,e},n.updateSize=function(){var t=this.component;this.componentWidth=Math.round(t.offsetWidth),this.componentHeight=Math.round(t.offsetHeight)},n.getProportion=function(a){void 0===a&&(a=function(){});var o=this.params;if(o.proportion)a(o.proportion);else{var n=i(o,50);e(n,function(e){o.proportion=e.naturalHeight/e.naturalWidth,t[o.id]&&(t[o.id].proportion=o.proportion),a(o.proportion)})}},n.getOptimalSize=function(t){void 0===t&&(t=function(){});var e=this.componentWidth,i=this.componentHeight,a=i/e,o=this.$component.data("img-scale");this.getProportion(function(n){var r,s;a>n&&"contain"===o||a<n&&"cover"===o?(r=e,s=e*n):(r=i/n,s=i),r=Math.round(r),s=Math.round(s),t({width:r,height:s})})},o}(BaseComponent);flexbe_cli.components.classes.image=a,flexbe_cli.components.helpers.replacePlaceholder=function(t){var e=$(t);e&&0!==e.length&&e.each(function(t,e){var i=$(e).data("src"),a=$(e).data("srcset"),o=new Image;o.onload=function(){i&&(e.src=i),a&&(e.srcset=a),$(e).addClass("loaded")},i&&(o.src=i),a&&(o.srcset=a)})}}();
"use strict";function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}!function(){var e=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];(t=e.call.apply(e,[this].concat(n))||this).is="video",t.type=t.$component.data("type"),t.autoplay=!!+t.$component.data("autoplay"),t.$preview=t.$component.find(".video-preview"),t.hasPreview=t.$preview.length,t.frameLoaded=!1,t.autoSet=!0;var a=t.$component.parent();a.hasClass("slider-item")&&(a.closest(".component-slider").attr("data-current-index")===a.attr("data-real-index")||(t.autoSet=!1));return t.$component.off("sliderActivate").on("sliderActivate",function(){t.set()}),t.$component.off("sliderDeactivate").on("sliderDeactivate",function(){t.pause()}),t}_inheritsLoose(t,e);var o=t.prototype;return o.onInit=function(){this.bindEvents()},o.onView=function(e){var t=this,o=e.state;if(o?this.autoplay&&this.onFrameLoaded(function(){t.play()}):this.pause(),!o||!this.autoSet||this.isViewed||this.isBesided)return!1;this.set()},o.onBeside=function(e){if(!e.state||!this.autoSet||this.isViewed||this.isBesided)return!1;this.set()},o.onPageLoad=function(){var e=this;setTimeout(function(){if(!e.autoSet||e.isViewed||e.isBesided)return!1;e.set()},2e3)},o.bindEvents=function(){},o.set=function(e){var t=this,o=(void 0===e?{}:e).autoplay;if(this.isSet)return!1;this.isSet=!0;var n=this.component.querySelector("iframe");if(!n)return!1;var i=n.getAttribute("data-src"),a=n.getAttribute("src");n.onload=function(){if(t.hasPreview&&!flexbe_cli.is_admin)if("youtube"===t.type){var e=function(e){e.data!==window.YT.PlayerState.BUFFERING&&e.data!==window.YT.PlayerState.PLAYING||t.$component.addClass("started")};flexbe_cli.require(["https://www.youtube.com/iframe_api?origin="+window.location.host],function(){!function(e,t){if("function"!=typeof t||"function"!=typeof e)return!1;if(e())t();else var o=window.setInterval(function(){e()&&(window.clearInterval(o),t())},10)}(function(){return window.YT&&window.YT.Player},function(){var o=t.component.querySelector("iframe");t.ytVideo=new window.YT.Player(o,{events:{onStateChange:e}})})})}else"vimeo"===t.type&&flexbe_cli.require(["https://player.vimeo.com/api/player.js"],function(){var e=t.component.querySelector("iframe"),o=new window.Vimeo.Player(e);o.on("bufferstart",function(){o.off("bufferstart"),t.$component.addClass("started")})})},i&&!a&&(n.src=i+(o?"&autoplay=1":""))},o.play=function(){var e=this.component.querySelector("iframe"),t=e&&e.contentWindow;if(!t)return!1;this.isPaused=!1,"vimeo"===this.type?t.postMessage({method:"play"},"*"):t.postMessage('{"event":"command","func":"playVideo","args":""}',"*")},o.pause=function(){var e=this.component.querySelector("iframe"),t=e&&e.contentWindow;if(!t)return!1;this.isPaused=!0,"vimeo"===this.type?t.postMessage({method:"pause"},"*"):t.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")},o.onFrameLoaded=function(e){var t=this;if(this.frameLoaded)"function"==typeof e&&e();else{var o=this.$component.find("iframe");o.on("load",function(){o.off("load"),t.frameLoaded=!0,"function"==typeof e&&e()})}},t}(BaseComponent);flexbe_cli.components.classes.video=e}();
"use strict";function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _inheritsLoose(t,i){t.prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i}function _extends(){return(_extends=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}).apply(this,arguments)}!function(){function t(t,i,e,n){var a=$(t),s=i?'[data-component="'+i+'"]':"[data-component]";a.is(s)?a.trigger(e,n):$(t).find(s).each(function(t,i){$(i).trigger(e,n)})}function i(t){return["normal","active"].includes(t)}var e=function(){function t(t,i){if(i=_extends({init:!0,targets:"span",active:0},i),"object"!=typeof t||!t.querySelectorAll)return!1;Array.isArray(i.targets)||i.targets instanceof NodeList||i.targets instanceof HTMLCollection?this.targets=Array.from(i.targets):this.targets=Array.from(t.querySelectorAll(i.targets)),this.pagination=t,this.options=i,this.active=i.active,this.visible=i.visible||+t.getAttribute("data-bullets-visible"),this.visible||(this.visible=this.targets.length>=8?3:this.targets.length),this.init()}var e=t.prototype;return e.init=function(){this.bindEvents(),this.options.init&&this.setActive(this.active,!0)},e.bindEvents=function(){var t=this.targets,i=this.options,e=$(t);"function"==typeof i.onClick&&e.off(".bpc").on("click.bpc",function(t){var n=$(t.currentTarget),a=+e.filter('[data-state="active"]').attr("data-index"),s=+n.attr("data-index");i.onClick(s,a)})},e.setActive=function(t,e){var n,a,s=this.targets,o=this.active,r=this.oldMap,l=this.newMap;if(!s.length)return t;if(t=Math.max(Math.min(t,s.length-1),0),r=r&&r.length?r:s.map(function(t){var i=t.getAttribute("data-state")||"hidden";return{target:t,state:i}}),(e?0:r.reduce(function(t,e){return t+(i(e.state)?1:0)},0))!==this.visible)a=Math.min(t+this.visible-1,s.length-1),n=Math.max(a-this.visible+1,0),l=r.map(function(t,i){var e=t.target;t.state;return{target:e,state:i>=n&&i<=a?"normal":"hidden"}});else{var p=function t(e){var n=e.from,a=e.to,s=e.map,o=e.move,r=void 0===o?0:o,l=s[a-r],p=l&&i(l.state);return!l||p?r:n<a?t({from:n,to:a,map:s,move:r+1}):a<n?t({from:n,to:a,map:s,move:r-1}):r}({from:o,to:t,map:r});l=r.map(function(t,e){var s=t.target,o=t.state,l=r[e-p];return"normal"===(o=l&&l.state&&i(l.state)?"normal":"hidden")&&(void 0===n&&(n=e),a=e),{target:s,state:o}})}return l[t].state="active",l[n-1]&&(l[n-1].state="next"),l[n-2]&&(l[n-2].state="more"),l[a+1]&&(l[a+1].state="next"),l[a+2]&&(l[a+2].state="more"),s.forEach(function(t,i){t.setAttribute("data-state",l[i].state)}),this.active=t,this.oldMap=l,t},t}(),n=function(){function t(t,i){this.options=_extends({init:!0,tag:"span"},i),this.pagination=t,this.tag=this.options.tag,this.filled=!1,this.states=["hidden","more","next","active","next","more","hidden"],this.init()}var i=t.prototype;return i.init=function(){this.bindEvents(),this.options.init&&this.fillPagination({states:this.states,force:!0})},i.bindEvents=function(){var t=this.tag,i=this.pagination,e=this.options,n=$(i);"function"==typeof e.onClick&&n.off(".bpc").on("click.bpc",t,function(t){var i=$(t.currentTarget),n=+i.siblings('[data-state="active"]').attr("data-index"),a=+i.attr("data-index")-n;e.onClick(a)})},i.setActive=function(t){var i=this,e=this.states,n=this.filled&&t;if(this.fillPagination({states:e,force:!0}),n){this.pagination.offsetWidth;var a=e.map(function(i,n){return e[n+("prev"===t?1:-1)]||"hidden"});requestAnimationFrame(function(){i.fillPagination({states:a})})}},i.fillPagination=function(t){var i=void 0===t?{}:t,e=i.states,n=i.force,a=$(this.pagination),s=this.tag;if(this.filled=!0,n){var o=e.reduce(function(t,i,e){return t+"<"+s+' data-index="'+e+'" class="swiper-pagination-bullet" data-state="'+i+'"></'+s+">"},"");a.html(o)}else a.find(s).each(function(t,i){var n=$(i);n.attr("data-state",e[t]||"hidden"),n.attr("data-index",t)})},t}(),a=function(i){function a(){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var s=_assertThisInitialized(t=i.call.apply(i,[this].concat(n))||this).component;t.require=["/_s/lib/swiper/swiper.v4.js"],t.is="slider",t.swiper=null,t.wrapperEl=s.querySelector(".slider-wrapper"),t.paginationEl=s.querySelector(".slider-pagination"),t.prevEl=s.querySelector('.slider-prev, [data-direction="prev"]'),t.nextEl=s.querySelector('.slider-next, [data-direction="next"]');var o=t.paginationEl&&t.paginationEl.getAttribute("data-type")||"bullets";return t.options={count:s.getAttribute("data-count"),paginationType:o,loop:Boolean(!flexbe_cli.is_admin&&Math.floor(s.getAttribute("data-loop"))),autoplay:!flexbe_cli.is_admin&&Math.floor(s.getAttribute("data-autoplay"))||!1},t}_inheritsLoose(a,i);var s=a.prototype;return s.onInit=function(){this.isUpdated&&this.isLoaded&&this.initSwiper()},s.onLoad=function(){if(!this.inView&&!this.inBeside)return!1;this.initSwiper()},s.onView=function(t){var i=t.state;if(!this.isLoaded)return!1;this.swiper||this.initSwiper(),this.toggleAutoplay({state:i})},s.onBeside=function(t){if(!t.state||!this.isLoaded||this.swiper)return!1;this.initSwiper()},s.onResize=function(){this.setComponentSize()},s.initSwiper=function(){var i=this;if(this.swiper||this.options.count<=1||"undefined"==typeof Swiper)return!1;this.setComponentSize();var a=this.options,s=this.component,o=this.owner,r=this.root,l=this.index,p=this.wrapperEl,d=this.paginationEl,c=this.prevEl,h=this.nextEl,u=(o._core&&o._core.id||"-")+":"+l,f=a.count,g=a.loop,v=a.paginationType,m=this.owner.closest(".swiper-inited"),w={prevEl:c,nextEl:h},b={el:d,type:v,clickable:4!==flexbe_cli.theme_id||!g,modifierClass:"slider-pagination-"},y=!!a.autoplay&&{delay:1e3*a.autoplay,stopOnLastSlide:!g},x={};"thumbs"===v&&(b.type=!1,b.el=null,x.swiper={el:d,wrapperClass:"thumbs",slideClass:"thumb-item",loop:!1,slidesPerView:"auto",freeMode:!0,freeModeSticky:!0,roundLengths:!1,a11y:!1});var _=0;if(flexbe_cli.is_admin){r._sliderState||(r._sliderState={});var A=r._sliderState;A[u]&&(_=Math.max(0,Math.min(f-1,A[u])||0)),A[u]=_}this.swiper=new Swiper(p,{init:!1,speed:450,nested:m,wrapperClass:"slider",slideClass:"slider-item",slideActiveClass:"active",noSwipingClass:"redactor-box",initialSlide:_,navigation:w,pagination:b,thumbs:x,autoplay:y,loop:g,observer:!0,observeParents:!0,simulateTouch:!flexbe_cli.is_admin,a11y:!1,touchReleaseOnEdges:!0,roundLengths:!0,touchMoveStopPropagation:!1,preventClicksPropagation:!0,preventClicks:!0,runCallbacksOnInit:!1}),this.swiper.on("init",function(){($(p).addClass("swiper-inited"),$(c).add(h).removeClass("disabled"),"thumbs"===v&&$(d).removeClass("disabled"),g)&&($(".swiper-slide-duplicate",s).find(".component-image").removeAttr("data-lg"),flexbe_cli.components.initComponents({core:i.owner._core}))});var C=!1,S=!1;this.swiper.on("slideChangeTransitionEnd",function(){var t=i.swiper;if(g&&t.activeIndex!==t.realIndex+1){var e=i.swiper.autoplay&&i.swiper.autoplay.running;C=!0,t.slideToLoop(t.realIndex,0),e&&i.toggleAutoplay({state:!0})}else C=!1}),this.swiper.on("slideChange",function(){var e=i.swiper;if(!C){var n=e.slides[e.previousIndex],a=e.slides[e.activeIndex],o=a&&a.getAttribute("data-type")||"image";s.setAttribute("data-current-content",o),flexbe_cli.is_admin&&(r._sliderState[u]=e.realIndex),t(n,!1,"sliderDeactivate"),t(a,!1,"sliderActivate"),i.swiper.initialized&&!S&&(S=!0,t(i.$component,"image","setImage"))}}),this.swiper.on("paginationRender",function(){4===flexbe_cli.theme_id&&"bullets"===b.type&&(g?i.loopPagination=new n(d,{init:!1,tag:"span",onClick:function(t){t<0?i.swiper.slidePrev():t>0&&i.swiper.slideNext()}}):i.bulletsPagination=new e(d,{init:!1,targets:"span",active:i.swiper.realIndex})),$(d).removeClass("disabled")}),this.swiper.on("paginationUpdate",function(){if(!C)if(i.bulletsPagination)i.bulletsPagination.setActive(i.swiper.realIndex);else if(i.loopPagination){var t=i.swiper.previousIndex<i.swiper.activeIndex?"next":"prev";i.loopPagination.setActive(t)}}),this.swiper.init(),this.toggleAutoplay({state:this.inView})},s.toggleAutoplay=function(t){var i=t.state;if(!this.swiper)return!1;var e=this.swiper;this.options.autoplay&&e.autoplay&&(i&&!e.autoplay.running?e.autoplay.start():!i&&e.autoplay.running&&e.autoplay.stop())},s.slideTo=function(t,i){void 0===i&&(i=!0),this.swiper&&void 0!==this.swiper.realIndex&&this.swiper.realIndex!==t&&(i?this.swiper.slideToLoop(t):this.swiper.slideTo(t))},s.setComponentSize=function(){this.component.style.width="";var t=this.component.getBoundingClientRect().width;if(t%1>0&&(this.component.style.width=Math.round(t)+"px"),"thumbs"===this.options.paginationType){var i=$(this.paginationEl).find(".thumb-item"),e=i.length;i.css({marginRight:"",width:""});var n=getComputedStyle(i[0]),a=parseInt(n.width,10),s=parseInt(n.marginRight,10),o=Math.max(4,Math.ceil(t/(a+s)));e>=4&&(e===o+1||e===o-1)&&(o=e);var r=(t+s)/o-s;i.css({width:r+"px",marginRight:s+"px"})}this.swiper&&this.swiper.update()},a}(BaseComponent);flexbe_cli.components.classes.slider=a,flexbe_cli.components.classes.bulletsPagination=e,flexbe_cli.components.classes.bulletsLoopPagination=n}();
"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}!function(){var e=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).is="button",t}_inheritsLoose(t,e),t.getProductInfo=function(e,t){void 0===t&&(t=!1);var i=flexbe_cli.theme_id<4?e.closest("[data-item-id], .modal-data").eq(0):e.parents("[data-item-id], .content-zone, .flexbe-card, .flexbe-column, .modal-content").last(),n=t?{}:e.data("product");if(!1!==n){if((n=_extends({},n)).count||(n.count=1),!n.img){var a=i.find("[data-img-id]").filter(function(e,t){return!$(t).closest(".swiper-slide-duplicate").length}).eq(0),o=a.attr("data-img-id"),l=a.attr("data-img-name");n.img=!(!o||!l)&&"/img/"+o+"_200/"+l}if(!n.title){var c=i.find(".name, .title, .item-title, .text_title, .element-text--title, .text-style-title, .text-style-subtitle").eq(0);c.length||(c=i.find(".text-style-conntent").eq(0)),n.title=c.text().trim()||""}if(!n.price&&0!==n.price){var r=i.find(".price, .item-price, .main-price, .element-text--price").eq(0).clone();r.length||(r=i.clone()),$("body").append(r),r.find("del, s, strike").remove();var m=String(r[0]&&r[0].innerText||"");m=m.replace(/\n/g,"<br>").replace(/\.$/,"").replace(/\u00a0/g," "),r.remove(),m=(m=(m=m.match(/(?:\D ?)?(?:[1-9][ ,.]?[0-9]{0,3}[ ,.]?[0-9]{0,3})(?:[\.,][0-9]{1,2})?(?: ?\D)?/g)||[]).find(function(e){return e.includes(flexbe_cli.locale.currency.symbol)})||m[0]||"").replace(/-/g,""),m=flexbe_cli.locale.parseMoney(m),n.price=m||0}}return n};var i=t.prototype;return i.onInit=function(){this.$component.off("click.core-component").on("click.core-component",this.onClick.bind(this))},i.onClick=function(e){if(flexbe_cli.is_admin)return e.preventDefault(),!0;var t=this.$component,i=t.attr("data-action"),n=this.core.id;if(!i)return!0;var a=t.attr("data-modal-id"),o=flexbe_cli.stat.getGoal(i,a);flexbe_cli.stat.reach_goal(o);try{var l=t.find('[name="goal"]').val();l&&flexbe_cli.stat.reach_goal(l);var c=t.find('[name="goal_html"]').val();c&&($("body").find(".button-html-goal").detach(),$("body").eq(0).append('<div class="button-html-goal" style="display:none"></div>'),$("body").find(".button-html-goal").html(c))}catch(e){console.warn(e.message)}var r=!1;if(!["link","file","close","quiz"].includes(i)&&!(r=this.constructor.getProductInfo(t)||{}).id){var m=flexbe_cli.p_id,d=t.closest("[data-item-id]").attr("data-item-id")||0,s=this.root&&this.root.getAttribute("data-multivar")||"";r.id=""+m+n+d+s}if(r&&(r.title&&"-"!==r.title||r.price)||(r=!1),a&&i.match(/^modal|^form/)){if(!flexbe_cli.modal.find(a))a=parseInt(String(n).split("_")[0],10)+"_"+a;flexbe_cli.events.emit("mobilemenu_command",{command:"close"}),flexbe_cli.events.emit("modal_command",{command:"open",id:a,data:{items:r?[r]:[]}})}else if(r&&i.match(/^cart$/)){var f=t.closest(".m_modal").length;t.addClass("animate-add-to-cart"),setTimeout(function(){t.removeClass("animate-add-to-cart"),f&&(flexbe_cli.events.emit("modal_command",{command:"close"}),flexbe_cli.events.emit("cart_command",{command:"add",item:r}))},f?450:1600),f||flexbe_cli.events.emit("cart_command",{command:"add",item:r})}else"quiz"===i?flexbe_cli.events.emit("quiz_command",{command:"start",id:n}):"close"===i&&flexbe_cli.events.emit("modal_command",{command:"close"})},t}(BaseComponent);flexbe_cli.components.classes.button=e}();
"use strict";function _inheritsLoose(e,o){e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o}!function(){var e=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(o=e.call.apply(e,[this].concat(n))||this).is="map",o.$map=o.$component,o.data=o.$component.data("data"),o.$component.removeAttr("data-data"),o}_inheritsLoose(o,e);var t=o.prototype;return t.onInit=function(){this.isUpdated&&this.isLoaded&&this.createMap()},t.onLoad=function(){(this.inView||this.inBeside)&&this.createMap()},t.onView=function(e){var o=e.state;if(!this.isLoaded)return!1;!o||this.isViewed||this.isBesided||this.createMap()},t.onBeside=function(e){var o=e.state;if(!this.isLoaded)return!1;!o||this.isViewed||this.isBesided||this.createMap()},t.createMap=function(){},o}(BaseComponent),o=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];o=e.call.apply(e,[this].concat(n))||this;var s=flexbe_cli.components.classes.map.getLocaleCode({provider:"yandex"})||"ru_RU",i=flexbe_cli.yandex_maps_api_key?"&apikey="+flexbe_cli.yandex_maps_api_key:"";return o.require=["//api-maps.yandex.ru/2.1/?lang="+s+i],o}_inheritsLoose(o,e);var t=o.prototype;return t.onResize=function(){var e=this.map;e&&e.container.fitToViewport()},t.createMap=function(){var e=this;"undefined"!=typeof ymaps&&ymaps.ready(function(){e.createVendor(),e.setPlaces(),e.dispatchEvents(),e.fixBehavior(),e.$component.trigger("mapInit"),e.$component.removeClass("loading")})},t.createVendor=function(){this.map&&this.map.destroy(),this.map=new ymaps.Map(this.$component.find(".map")[0],{center:this.data.center,zoom:this.data.zoom,controls:["zoomControl"],behaviors:["default","scrollZoom"],type:"yandex#map"})},t.setPlaces=function(){var e=this,o=this.map,t=this.data;if(o){o.geoObjects.removeAll();var n=ymaps.templateLayoutFactory.createClass('<svg title="$[properties.balloonContent]" class="placemark" width="32" height="48" viewBox="0 0 24 32" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36 0 0 5.36 0 12c0 8 12 20 12 20s12-12 12-20c0-6.64-5.36-12-12-12zm0 8a4 4 0 0 1 4 4c0 2.22-1.78 4-4 4a4 4 0 0 1-4-4c0-2.2 1.8-4 4-4z" fill="$[properties.color]" fill-rule="evenodd"/></svg>');ymaps.layout.storage.get("custom#placemark")||ymaps.layout.storage.add("custom#placemark",n),t.places.forEach(function(t,n){t.color=t.color||"#3D52B0";var a=new ymaps.Placemark(t.coords,{balloonContentHeader:t.name||!1,balloonContent:t.address,color:t.color},{hideIconOnBalloonOpen:!1,balloonOffset:[0,-48],balloonCloseButton:!1,iconLayout:"custom#placemark",iconShape:{type:"Rectangle",coordinates:[[-16,-48],[16,0]]}});a.events.add("balloonopen",function(){e.$component.trigger("balloonOpen",n,t)}),o.geoObjects.add(a),t._mark=a})}},t.dispatchEvents=function(){var e=this.data,o=this.map;o&&(this.$component.on("selectMark",function(t,n){if(e.places.length&&e.places[n]){var a=e.places[n];o.setCenter(a.coords,e.zoom,{duration:350,checkZoomRange:!0}).then(function(){o.setCenter(a.coords)}),a._mark&&a._mark.balloon.open()}}),this.$component.on("resizeMap",function(){o.container.fitToViewport()}))},t.fixBehavior=function(){var e,o=this.map;o&&(o.behaviors.disable("scrollZoom"),this.$component.off("mouseenter.preventzoom").on("mouseenter.preventzoom",function(){e=setTimeout(function(){o.behaviors.enable("scrollZoom")},500)}),this.$component.off("mouseleave.preventzoom").on("mouseleave.preventzoom",function(){e&&(clearTimeout(e),o.behaviors.disable("scrollZoom"))}),flexbe_cli.run.is_mobile&&o.behaviors.disable("drag"))},o}(e),t=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];o=e.call.apply(e,[this].concat(n))||this;var s=flexbe_cli.google_maps_api_key,i=flexbe_cli.components.classes.map.getLocaleCode({provider:"google"})||"ru";return o.require=["//maps.googleapis.com/maps/api/js?key="+s+"&language="+i],o}_inheritsLoose(o,e);var t=o.prototype;return t.createMap=function(){"undefined"!=typeof google&&(this.createVendor(),this.styleMap(),this.setPlaces(),this.dispatchEvents(),this.fixBehavior(),this.$component.trigger("mapInit"),this.$component.removeClass("loading"))},t.createVendor=function(){var e=this.data;this.map=new google.maps.Map(this.$component.find(".map")[0],{center:{lat:e.center[0],lng:e.center[1]},zoom:e.zoom,disableDefaultUI:!0,panControl:!0,zoomControl:!0,fullscreenControl:!0,mapTypeControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1})},t.dispatchEvents=function(){var e=this,o=this.$component,t=this.map;t&&(o.on("selectMark",function(o,t){e.selectMark(t,!0)}),o.on("resizeMap",function(){google.maps.event.trigger(t,"resize")}))},t.setPlaces=function(){var e=this,o=this.data,t=this.map;t&&o.places.forEach(function(o,n){var a='<svg width="32" height="48" viewBox="0 0 24 32" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C5.36 0 0 5.36 0 12c0 8 12 20 12 20s12-12 12-20c0-6.64-5.36-12-12-12zm0 8a4 4 0 0 1 4 4c0 2.22-1.78 4-4 4a4 4 0 0 1-4-4c0-2.2 1.8-4 4-4z" fill="'+(o.color||"#222")+'" fill-rule="evenodd"/></svg>',s=new google.maps.Marker({position:{lat:o.coords[0],lng:o.coords[1]},map:t,visible:!0,animation:google.maps.Animation.DROP,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(a)}});o._mark=s,s.addListener("click",function(){e.selectMark(n)})})},t.styleMap=function(){var e=this.data,o=this.map;if(o)if("default"!==e.style&&e.style){var t="/_s/lib/google/maps/styles/"+e.style+".json";$.getJSON(t,function(e){e&&Array.isArray(e)&&o.setOptions({styles:e})})}else o.setOptions({styles:[]})},t.selectMark=function(e,o){void 0===o&&(o=!1);var t=this.data,n=this.map,a=t.places;if(n&&a&&a.length&&a[e]){a.forEach(function(e){return e._info&&e._info.close()});var s=a[e],i="";s.name&&(i+='<div style="margin-bottom: 3px;"><strong>'+s.name+"</strong></div>"),s.address&&(i+="<div>"+s.address+"</div>"),s._info=new google.maps.InfoWindow({content:i}),s._info.open(n,s._mark),o&&n.panTo({lat:s.coords[0],lng:s.coords[1]}),this.$component.trigger("balloonOpen",e,s)}},t.fixBehavior=function(){var e,o=this.$component,t=this.map;t&&(o.off("mouseenter.preventzoom").on("mouseenter.preventzoom",function(){e=setTimeout(function(){t.setOptions({scrollwheel:!0})},500)}),o.off("mouseleave.preventzoom").on("mouseleave.preventzoom",function(){e&&(clearTimeout(e),t.setOptions({scrollwheel:!1}))}))},o}(e);flexbe_cli.components.classes.map=function(e){var n=e.args[0]||"yandex";return"google"===n&&!flexbe_cli.is_admin&&String(flexbe_cli.google_maps_api_key.length)<32&&(n="yandex"),new("google"===n?t:o)(e)},flexbe_cli.components.classes.map.getLocaleCode=function(e){var o=e.lang,t=e.provider,n=o||flexbe_cli.locale.language,a={yandex:{ru:"ru_RU",by:"ru_RU",ge:"ru_RU",kz:"ru_RU",ua:"uk_UA",default:"en_US"},google:{ru:"ru",by:"be",ge:"ru",kz:"kk",ua:"uk",fr:"fr",pl:"pl",de:"de",es:"es",it:"it",default:"en"}};return!!a[t]&&(a[t][n]||a[t].default)}}();
"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}!function(){var e={phone:{RU:["+7 (***) ***-**-**","8 (***) ***-**-**"],KZ:["+7 (***) ***-**-**","8 (***) ***-**-**"],UA:["+38 (***) ***-****"],BY:["+375 ** *******"],US:["+1 (***) ***-****"]}},t=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).is="form",e.ownerId=e.owner.getAttribute("data-id"),e.eventId="."+e.ownerId,e.$form=e.$component.find("form"),e.$fields=e.$form.find(".form-fields"),e.action=e.$form.find('input[name="action"]').val(),e.$form.find('input[name="p_id"]').val(flexbe_cli.p_id),e}_inheritsLoose(i,t),i.getDefaultMask=function(t){var i=String(t).toLowerCase(),n=flexbe_cli.locale.country,a=e[i]&&e[i][n];return a&&"string"==typeof a&&(a=[a]),_extends([],a)},i.initMask=function(e){if("undefined"==typeof IMask)return!1;var t={signed:!0,lazy:!0,padFractionalZeros:!0,definitions:{"*":/[0-9]/}},i=e.getAttribute("data-required"),n=e.getAttribute("data-mask");n=n&&!/[ ()*{}]/.test(n)?flexbe_cli.components.classes.form.getDefaultMask(n):[n];try{if(0===(n=(n=n.filter(function(e){return/[ ()*_{}]/.test(e)})).map(function(e){return e.replace(/0/g,"\\0")})).length)throw{message:"Mask is empty"};n=1===n.length?String(n[0]):n.map(function(e){return _extends({},t,{mask:e})});var a=new IMask(e,_extends({},t,{mask:n,dispatch:function(e,t){var i=t.compiledMasks;if(1==i.length)return i[0];var n=(t.value+e).replace(/\W/g,"");return i.find(function(e){var t=e.mask.replace(/\W/g,"")[0];return n[0]==t})||i[0]}})),o=function(){a.masked.isComplete||!i&&!a.value?e.setAttribute("data-mask-complete",!0):e.removeAttribute("data-mask-complete"),e.setAttribute("value",a.value)};e.value&&o(),a.on("accept",o),e._mask=a}catch(t){return t instanceof Error&&console.warn("MASK ERROR:",{masks:n,errorMessage:t.message}),e.removeAttribute("data-mask"),!1}};var n=i.prototype;return n.onInit=function(){this.$masked=this.$form.find("[data-mask]"),!flexbe_cli.is_admin&&this.$masked.length&&(this.needInitMasks=!0,this.require=["/_s/lib/imask/imask.min.js"])},n.onLoad=function(){this.needInitMasks&&(this.isViewed||this.isBesided)&&this.inputMask()},n.onView=function(e){if(!e.state||this.isViewed||this.isBesided)return!1;this.formInit()},n.onBeside=function(e){if(!e.state||this.isViewed||this.isBesided)return!1;this.formInit()},n.onOpen=function(e){void 0===e&&(e={});var t=this.component.getBoundingClientRect().top;!flexbe_cli.is_admin&&flexbe_cli.resize.height>t+100&&this.$component.find(".form-field").find("input, textarea").eq(0).focus(),e.data&&this.setData(e.data)},n.formInit=function(){if(this.formInited)return!1;this.formInited=!0,this.unbindEvents(),this.bindEvents(),this.customize()},n.customize=function(){this.fileInput(),this.customSelect(),this.enterSubmit(),this.textResize(),this.needInitMasks&&this.isLoaded&&this.inputMask()},n.unbindEvents=function(){this.$component.off(this.eventId),this.$form.off(this.eventId)},n.bindEvents=function(){var e=this,t=this.$fields.find(".form-field-text > input, .form-field-text > textarea, .form-field-checkbox > input");t.on("keydown"+this.eventId,function(e){var t=e.currentTarget;if("phone"===t.getAttribute("data-check")&&!t._mask&&e.key&&1===e.key.length&&/[^\-+\d ()]/.test(e.key))return!1}),t.on("input"+this.eventId+" change"+this.eventId,function(e){var t=e.currentTarget,i=$(t);t.setAttribute("value",t.value),i.closest(".form-field").removeClass("is_error")}),this.$form.on("click"+this.eventId,".form_field_submit, .form-field-submit",function(){e.$form.submit()}),this.$form.on("submit"+this.eventId,function(){if(e.busy||!e.validateForm())return!1;if(e.busy=!0,flexbe_cli.stat.u_id&&e.addFields([{name:"f_uid",type:"hidden",value:flexbe_cli.stat.u_id}],!1),"function"==typeof e.beforeSend&&!1===e.beforeSend())return e.busy=!1,!1;if(e.addFields([{name:"jsform",type:"hidden",value:parseInt(448312,10)}],!1),"undefined"!=typeof FormData)e.sendFormdata();else{if(!(e.$form.find('input[type="file"]').length<1))return!0;e.sendAjax()}return!1})},n.setData=function(e){if(!e)return!1;e&&e.fields&&this.addFields(e.fields),e&&e.items&&this.addItems(e.items)},n.onBeforeSend=function(e){"function"==typeof e&&(this.beforeSend=e)},n.onAfterSent=function(e){"function"==typeof e&&(this.afterSent=e)},n.addFields=function(e,t){void 0===t&&(t=!0);var i=this.$form.find(".form_fields_advanced");e.length&&i[0]&&(t&&i.empty(),e.forEach(function(e){i.find('input[name="'+e.name+'"]').remove();var t=$("<input>").attr("type",e.type).attr("name",e.name).attr("value",e.value);i.append(t)}))},n.addItems=function(e){if(void 0===e&&(e=[]),e&&e.length){var t=0,i=0,n="",a=[];e=e.map(function(e){return"object"!=typeof e?{}:(e.count=parseInt(e.count,10)||1,e.price=parseFloat(e.price)||0,e.title="string"==typeof e.title&&e.title.trim()||e.title||"",t+=e.price*e.count||0,i+=e.count,e)});try{n=JSON.stringify(e)}catch(e){}a.push({type:"hidden",name:"product[items]",value:n}),a.push({type:"hidden",name:"product[price]",value:t}),a.push({type:"hidden",name:"product[total]",value:i}),t&&(a.push({type:"hidden",name:"pay[price]",value:t}),a.push({type:"hidden",name:"pay[desc]",value:i>1?"  : "+i:e[0].title})),this.addFields(a)}},n.sendFormdata=function(){var e=this,t=new FormData(this.$form.get(0));if(t.append("is_ajax","true"),"undefined"!=typeof flexbeAPI&&void 0!==flexbeAPI.customLeadData&&t.append("customLeadData",JSON.stringify(flexbeAPI.customLeadData)),flexbe_cli.run.is_OSX&&"function"==typeof t.entries){var i=t.entries(),n=Array.isArray(i),a=0;for(i=n?i:i[Symbol.iterator]();;){var o;if(n){if(a>=i.length)break;o=i[a++]}else{if((a=i.next()).done)break;o=a.value}var s=o,r=s[0],l=s[1];"object"==typeof l&&l instanceof File&&0===l.size&&t.delete(r)}}t.append("f_ab",JSON.stringify(flexbe_cli.stat.AB.getcookie())),this.$component.addClass("submitting");var d=$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",processData:!1,contentType:!1,data:t,xhr:function(){return $.ajaxSettings.xhr()}});d.done(function(t){e.$component.addClass("success submit-ok"),e.$component.removeClass("submitting"),t.send_formdata=!0,void 0!==t.pay&&(e.pay=t.pay),e.showDone(),setTimeout(function(){e.$component.removeClass("success submit-ok")},1e3)}),d.fail(function(t){console.error("sendFormdata error: ",t),e.busy=!1,e.$component.removeClass("submitting")})},n.sendAjax=function(){var e=this,t=this.$form.serialize();$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",data:t+"&is_ajax=true"}).done(function(t){e.$form.get(0).reset(),t.send_ajax=!0,void 0!==t.pay&&(e.pay=t.pay),e.showDone()}).fail(function(t){console.error("sendAjax:    ",t),e.busy=!1,e.$component.removeClass("submitting")})},n.resetForm=function(){this.$form.get(0).reset(),this.$form.find(".file-input-outer").removeClass("active"),this.$fields.find('input:not(:hidden):not([type="radio"])').each(function(e,t){t.value="",t.checked=!1,t.removeAttribute("value"),t.removeAttribute("checked"),t.removeAttribute("data-mask-complete"),t._mask&&t._mask.updateValue()})},n.validateForm=function(){var e=this,t=!0,i=!0;return this.$form.find("[data-type]").each(function(n,a){var o=$(a),s=o.find("input, textarea, select").not('[type="hidden"]')[0],r="checkbox"===s.type?s.checked:s.value,l=e.checkField(s);if(o.removeClass("is_error"),l){var d=o.attr("data-type"),c=o.find(".error");o.outerWidth(),o.addClass("is_error"),c.length&&(c.attr("title",l),c.find(".error-text").text(l)),"checkbox"===d&&o.find(".form-field-checkbox--box").attr("title",l),t=!1}i&&r&&(i=!1)}),this.$fields.removeClass("all-fields-empty"),this.$fields.removeClass("has-error"),this.$fields.outerWidth(),t||this.$fields.addClass("has-error"),i&&(this.$fields.toggleClass("all-fields-empty",i),4===flexbe_cli.theme_id&&(t=!1)),t},n.showDone=function(){this.resetForm(),"function"==typeof this.afterSent&&this.afterSent(),this.busy=!1,flexbe_cli.stat.reach_goal("order_done");try{var e=this.$form.find('input[name="goal"]').val();void 0!==e&&""!==e&&flexbe_cli.stat.reach_goal(e)}catch(e){}try{var t=this.$form.find('textarea[name="goal_html"]').val();if("string"==typeof t&&t.trim()){var i=document.write;document.write=function(e){$("body").eq(0).append(e)},$("body").eq(0).append('<div style="display:none">'+t+"</div>"),setTimeout(function(){document.write=i},1e4)}}catch(e){}if("pay"===this.action&&void 0!==this.pay&&null!==this.pay){if(this.pay.pay_link.length>0){var n=window.location.origin+window.location.pathname+(window.location.search?window.location.search+"&":"?")+"pay_id="+this.pay.pay_id+"&h="+this.pay.pay_hash;try{history.pushState(null,null,n),setTimeout(function(){flexbe_cli.events.emit("pay",{action:"init"})},200)}catch(e){setTimeout(function(){document.location=n},500)}}}else if("redirect"===this.action){var a=this.$form.find('input[name="action_redirect"]').val();a.length>0&&setTimeout(function(){flexbe_cli.modal.close(),document.location=a},500)}else{var o=this.$component.find("[data-modal-id]").attr("data-modal-id");if(!flexbe_cli.modal.find(o)){var s=String(this.ownerId);o=(s&&s.split("_")[0])+"_"+o}flexbe_cli.modal.find(o)?flexbe_cli.events.emit("modal_command",{command:"open",id:o}):console.warn("Modal open error:","There is no window attached to the form.",o)}},n.fileInput=function(){this.$component.on("change"+this.eventId,".file-input",function(e){var t=$(e.currentTarget),i=t.parents(".form_field_file_holder"),n=t.val(),a=e.currentTarget.files.length;if(i.addClass("active"),t.parents(".form_field").removeClass("is_error"),1===a&&i.find(".files_name_holder_text").text(n),a>1){var o,s=a%100,r=a%10,l=Math.floor(s/10);o=1===r&&11!==s?"form.filesMult":r>1&&r<5&&1!==l?"form.filesMult1":"form.filesMult2",i.find(".files_name_holder_text").text(a+" "+flexbe_cli.locale.tr(o))}0===a&&i.removeClass("active")}),this.$component.on("click"+this.eventId,".clear_files",function(e){var t=$(e.currentTarget).parents(".form_field_file_holder");t.find(".file-input").val(""),t.removeClass("active")})},n.enterSubmit=function(){flexbe_cli.is_admin||$(window).on("keyup"+this.eventId,function(e){if(13===e.which){var t=$(".m_modal.show").eq(0);if(t.find("textarea").is(":focus"))return!1;t.find("form").submit()}})},n.textResize=function(){this.$component.find(".autosize").each(function(e,t){var i=t.offsetHeight-t.clientHeight,n=$(t);n.removeAttr("data-autoresize"),n.off("keyup input").on("keyup input",function(e){e.currentTarget.style.height=e.currentTarget.scrollHeight+i+"px"})})},n.customSelect=function(){this.$component.find(".dropdown-container").remove(),this.$component.find("select.custom-select").each(function(e,t){var i=$(t),n=i.children("optgroup"),a=i.closest('[data-type="select"]'),o="",s="";n.length&&n.each(function(e,t){var i=$(t),n=i.attr("label");s+='<li class="optgroup">'+n+"</li>",i.children("option").each(function(e,t){var i=$(t),n=i.attr("value").replace(/"/g,"&quot;"),a=i.text()||"";"selected"===i.attr("selected")?(o=a,s+='<li class="selected" data-value="'+n+'">'+a+"</li>"):s+='<li data-value="'+n+'">'+a+"</li>"})}),i.children("option").each(function(e,t){var i=$(t),n=i.val().replace(/"/g,"&quot;"),a=i.text()||"";"selected"===i.attr("selected")?(o=a,s+='<li class="selected" data-value="'+n+'">'+a+"</li>"):s+='<li data-value="'+n+'">'+a+"</li>"});var r=$('<div class="dropdown-container">\n                        <div class="dropdown-select">\n                            <span>'+o+'</span>\n                        </div>\n                        <ul class="dropdown-select-ul">'+s+"</ul>\n                    </div>");i.after(r),r.off("click.selectdd").on("click.selectdd",".dropdown-select",function(){var e=r.hasClass("active");r.toggleClass("active",!e),a.toggleClass("active",!e),e||a.siblings('[data-type="select"]').removeClass("active").find(".dropdown-container").removeClass("active")}),r.off("click.selectli").on("click.selectli",".dropdown-select-ul li",function(e){var t=$(e.currentTarget);if(!t.hasClass("optgroup")){var n=t.closest("ul").siblings(".dropdown-select");r.toggleClass("active"),r.closest('[data-type="select"]').toggleClass("active"),t.siblings("li").removeClass("selected"),t.addClass("selected"),i.val(t.attr("data-value")),n.children("span").html(t.text())}})})},n.checkField=function(e){var t=e.type,i="checkbox"===t?e.checked:"file"===t?e.files:e.value,n=e.getAttribute("data-required")||!1,a=e.getAttribute("data-check")||!1,o=!(!n||i)&&"form.required";if(e._mask&&e.getAttribute("data-mask")||!1)!n&&!i||e.getAttribute("data-mask-complete")||(o="tel"===t&&i?"form.phone":"form.required");else if(a)if(i.length&&"email"===t){/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z--\-0-9]+\.)+[a-zA-Z--]{2,}))$/.test(i)||(o="form.email")}else if(i.length&&"tel"==t){if(/[^0-9+\(\)\-\s]/.test(i))o="form.digits";else i.replace(/[^0-9]/g,"").length<5&&(o="form.minlength")}else"file"==t&&(o=!(!n||i.length)&&"form.required");return o=o&&flexbe_cli.locale.tr(o)||!1},n.inputMask=function(){return"undefined"!=typeof IMask&&(this.needInitMasks=!1,this.$masked.each(function(e,t){flexbe_cli.components.classes.form.initMask(t)}),!0)},i}(BaseComponent);flexbe_cli.components.classes.form=t}();
"use strict";function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}!function(){var e=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];t=e.call.apply(e,[this].concat(s))||this;var n=s[0].core;return t.is="quiz",t.id=n.id,t.eventId="."+n.id,t.$quiz=null,t.current=0,t.total=0,t.hidePrevOnFirstStep=!!t.$component.data("hide-prev-on-firt"),t.textLoader=t.$component.data("text-loader"),t.outerModalId=4===flexbe_cli.theme_id&&"modal"===n.is&&n.id,t.swiper=[],t.createQuiz(n.$area),t}_inheritsLoose(t,e);var i=t.prototype;return i.onView=function(e){if(!e.state||this.isViewed||this.isBesided)return!1;this.init()},i.onBeside=function(e){if(!e.state||this.isViewed||this.isBesided)return!1;this.init()},i.onOpen=function(){this.inited&&this.toStep(1)},i.onInit=function(){this.$masked=this.$form.find("[data-mask]"),this.require=[],!flexbe_cli.is_admin&&this.$masked.length&&(this.needInitMasks=!0,this.require.push("/_s/lib/imask/imask.min.js")),flexbe_cli.run.is_screen_all_mobile&&(this.needInitSwiper=this.$component.find(".form-field-image-group").length,this.needInitSwiper&&this.require.push("/_s/lib/swiper/swiper.v4.js"))},i.onLoad=function(){(this.isViewed||this.isBesided)&&(this.needInitSwiper&&this.initSwiper(this.current),this.needInitMasks&&this.inputMask()),this.isLoaded=!0},i.createQuiz=function(e){this.$area=e,this.$container=e.find(".quiz-container"),this.$quiz=e.find(".component-quiz"),this.$form=this.$quiz.find("form"),this.$steps=this.$quiz.find(".quiz-steps"),this.$stepsWrapper=this.$quiz.find(".steps-wrapper"),this.$progress=this.$quiz.find('[data-quiz-part="progress"]'),this.$progress[0]||(this.$progress=e.find('[data-quiz-part="progress"]')),this.hasWelcome=!!parseInt(this.$quiz.attr("data-welcome"),10),this.current=parseInt(this.$quiz.attr("data-active-step"),10)||0,this.total=parseInt(this.$quiz.attr("data-total-steps"),10)},i.init=function(){if(!this.inited){this.inited=!0,this.bindEvents(),this.customize(),this.control();var e=this.hasWelcome&&!this.outerModalId?0:1;this.toStep(this.$area.data("quiz-step")||e,!0)}},i.bindEvents=function(){var e=this;flexbe_cli.events.off("quiz_command").on("quiz_command",function(e,t){var i;flexbe_cli.components.instances[t.id]&&flexbe_cli.components.instances[t.id].forEach(function(e){"quiz"===e.is&&(i=e)}),i&&("start"===t.command?i.toStep(1):"step"===t.command&&i.toStep(t.step))}),this.$form.off(this.eventId),this.$form.on("input"+this.eventId+" change"+this.eventId,"input, textarea",function(e){var t=e.currentTarget,i=t.value,s=$(t);s.attr("value",i),s.closest(".field").removeClass("is_error")}),this.$form.on("submit"+this.eventId,function(){return!(e.busy||flexbe_cli.is_admin||e.current<=e.total)&&(e.busy=!0,flexbe_cli.stat.u_id&&e.addFields([{name:"f_uid",type:"hidden",value:flexbe_cli.stat.u_id}],!1),e.addFields([{name:"jsform",type:"hidden",value:parseInt(448312,10)}],!1),"undefined"!=typeof FormData?(e.sendFormdata(),!1):!(e.$form.find('input[type="file"]').length<1)||(e.sendAjax(),!1))})},i.control=function(){var e=this;flexbe_cli.is_admin||($("body").off("keydown"+this.eventId).on("keydown"+this.eventId,function(t){if([9,13].includes(t.keyCode)){var i=flexbe_cli.block.hasOverlay||[],s=e.outerModalId&&"modal"===i[i.length-1],a=!e.outerModalId&&!i.length,n=e.inFocus&&(a||s),r=9===t.keyCode,o=13===t.keyCode,l=t.metaKey||t.ctrlKey,c=t.shiftKey;if(n&&(o||r)&&("TEXTAREA"!==t.target.tagName||!o||l))return c&&r?e.current>1&&e.toStep(e.current-1):e.current<=e.total&&e.toStep(e.current+1),t.preventDefault(),!1}}),this.$quiz.off("click.control").on("click.control","[data-quiz-action]",function(t){var i=$(t.currentTarget).data("quizAction"),s=e.current;"wellcome"===i?s=1:"next"===i?s+=1:"prev"===i?s-=1:"send"===i&&(s=e.total+1),e.toStep(s)}))},i.setProgress=function(){var e=this.$progress.find(".progress-loader-bar .current"),t=this.current,i=this.total,s=parseInt(100*t/i,10),a=e.data("unit");if(e.length&&a){var n=s+"%";"step"===a?n=t+" / "+i:"none"===a&&(n=""),e.attr("data-value",n)}this.$progress.attr("data-current",t>0?t:0),this.$progress.attr("data-current-progress",t>0?s:0),this.$progress.find(".progress-text .current").text(t),this.$progress.find(".progress-percent .current").text(s),this.$progress.find(".progress-loader-bar .current").css("width",s+"%"),this.$progress.find(".progress-loader-circle .current").attr("stroke-dashoffset",""+Math.abs(100-s))},i.toStep=function(e,t){var i=this;flexbe_cli.is_admin&&e>this.total&&(e=this.total);var s=this.hasWelcome&&e<=0,a=this.hasWelcome&&!this.outerModalId?0:1;if(void 0===e||e<a)e=a;else{if(!flexbe_cli.is_admin&&e>this.current&&!this.validateStep())return!1;if(e>this.total)return this.current=e,this.$form.submit(),!0}if(t&&this.$area.addClass("noanimate"),this.current=e,this.$area.data("quiz-step",e),this.$quiz.attr("data-active-step",e),this.$container.attr("data-active-step",e),this.$container.toggleClass("quiz-state-wellcome",s),this.$container.toggleClass("quiz-state-started",!s),this.setProgress(),s){if(this.outerModalId)flexbe_cli.modal.close(this.outerModalId);else if(this.$container.length){var n=this.$container.find('[data-quiz-part="'+(s?"wellcome":"done")+'"]').outerHeight()||0;this.$container.css("minHeight",n),this.$stepsWrapper.css("minHeight",""),flexbe_cli.run.is_ie&&flexbe_cli.block.fixCoverHeight(this.$area)}}else{var r=this.$steps.find('[data-step-id="'+e+'"]'),o=r.outerHeight(),l=!!r.find(".form-field-text-input").length;if(r.prevAll().removeClass("active next").addClass("prev"),r.nextAll().removeClass("active prev").addClass("next"),r.removeClass("next prev").addClass("active"),!flexbe_cli.is_admin&&!t){var c=r.find(".form-field-text input, .form-field-text textarea, .dropdown-select");c.length&&(c.focus(),setTimeout(function(){c.focus()},150))}if(this.$container.css("minHeight",o+"px"),this.$stepsWrapper.css("minHeight",o+"px"),flexbe_cli.run.is_ie&&this.$area.find(".cover").css("height","auto"),2===flexbe_cli.theme_id&&flexbe_cli.block.headers)this.$area.find(".b_head").length&&flexbe_cli.block.headers.setHeaders();setTimeout(function(){(i.initSwiper(e),i.initSwiper(e+1),flexbe_cli.is_admin||flexbe_cli.run.is_mobile&&l||!i.alreadyStepped&&!i.hasWelcome)?i.hasWelcome||(i.alreadyStepped=!0):(i.alreadyStepped=!0,!i.$area[0]._core||i.outerModalId||t||flexbe_cli.block.scrollTo(i.$area,!0,!0))},350)}return t&&setTimeout(function(){i.$area.removeClass("noanimate")},150),flexbe_cli.events.emit("quiz_event",{event:"to_step",sender:"core",quiz:this}),!0},i.validateStep=function(e){var t=this;e||(e=this.current);var i=!0;return this.$steps.find('[data-step-id="'+e+'"]').find("[data-type]").each(function(e,s){var a=$(s);a.removeClass("is_error");var n=t.checkField(a);n&&(a.outerWidth(),a.addClass("is_error"),a.find(".error").text(n),a.find("input, textarea").focus(),i=!1)}),i},i.checkField=function(e){var t,i=e.find("input, textarea, select").not('[type="hidden"]'),s=i[0],a=e[0],n=a.getAttribute("data-type"),r=[!0,1,"true","1"].includes(a.getAttribute("data-is-required")),o=s.getAttribute("data-check")||!1,l=s._mask&&s.getAttribute("data-mask")||!1;t=["checkbox","radio","image"].indexOf(n)>=0?!!i.closest(":checked").length:"file"===n?s.files:s.value;var c=!(!r||t)&&"form.required";if(l)!r&&!t||s.getAttribute("data-mask-complete")||(c="phone"===n&&t?"form.phone":"form.required");else if(o)if(t.length&&"email"===n){/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z--\-0-9]+\.)+[a-zA-Z--]{2,}))$/.test(t)||(c="form.email")}else if(t.length&&"phone"==n){if(/[^0-9+\(\)\-\s]/.test(t))c="form.digits";else t.replace(/[^0-9]/g,"").length<5&&(c="form.minlength")}else"file"==n&&(c=!(!r||t.length)&&"form.required");return c=c&&flexbe_cli.locale.tr(c)||!1},i.customize=function(){this.customImageSelect(),this.customSelect(),this.customTextarea(),this.customFile(),this.needInitMasks&&this.isLoaded&&this.inputMask()},i.customImageSelect=function(){this.$quiz.find(".form-field-image-item").on("click",function(e){var t=$(e.currentTarget).find("input");t[0].checked=!t[0].checked})},i.customFile=function(){this.$quiz.on("change",".file-input",function(e){var t=$(e.currentTarget),i=t.parents(".form-field-file"),s=i.find(".form-field-file-files"),a=t.val(),n=e.currentTarget.files.length;if(i.addClass("active"),t.parents(".field").removeClass("is_error"),0===n)i.removeClass("active");else if(1===n)s.find(".text").text(a);else if(n>1){var r,o=n%10;r=1===o&&11!==n%100?"form.filesMult":o>1&&o<5?"form.filesMult1":"form.filesMult2",s.find(".text").text(n+" "+flexbe_cli.locale.tr(r))}}),this.$quiz.off("click.clear-files").on("click.clear-files",".clear-files",function(e){var t=$(e.currentTarget).parents(".form-field-file");t.find(".file-input").val(""),t.removeClass("active")})},i.customSelect=function(){var e=this;this.$quiz.find(".dropdown-container").remove(),this.$quiz.find("select").each(function(t,i){var s=$(i),a=s.children("optgroup"),n=s.closest('[data-type="select"]'),r="",o="";a.length&&a.each(function(e,t){var i=$(t),s=i.attr("label");o+='<li class="optgroup">'+s+"</li>",i.children("option").each(function(e,t){var i=$(t),s=i.attr("value").replace(/"/g,"&quot;"),a=i.text()||"";"selected"===i.attr("selected")?(r=a,o+='<li class="selected" data-value="'+s+'">'+a+"</li>"):o+='<li data-value="'+s+'">'+a+"</li>"})}),s.children("option").each(function(e,t){var i=$(t),s=i.val().replace(/"/g,"&quot;"),a=i.text()||"";"selected"===i.attr("selected")?(r=a,o+='<li class="selected" data-value="'+s+'">'+a+"</li>"):o+='<li data-value="'+s+'">'+a+"</li>"});var l=$('<div class="dropdown-container">\n                    <div class="dropdown-select">\n                        <span>'+r+'</span>\n                        <i></i>\n                    </div>\n                    <ul class="dropdown-select-ul">'+o+"</ul>\n                </div>"),c=l.find(".dropdown-select-ul");s.after(l),l.off("click.selectdd").on("click.selectdd",".dropdown-select",function(){var t=e.$quiz.closest(".b_block"),i=t[0]._core,s=t.outerHeight()-60,a=c.outerHeight(),r=Math.min(s,a),o=l.offset().top,d=i.tween.end-30;o+r>d&&c.css({top:d-(o+r)+"px",maxHeight:r+"px"}),setTimeout(function(){var e=!l.hasClass("active");l.toggleClass("active",e),n.toggleClass("active",e),e&&$("body").on("click.quiz-select-element",function(e){$(e.target).is(l)||$(e.target).closest(l).length||(l.removeClass("active"),n.removeClass("active"),$("body").off("click.quiz-select-element"))})},50)}),l.off("click.selectli").on("click.selectli",".dropdown-select-ul li",function(e){var t=$(e.currentTarget);if(!t.hasClass("optgroup")){var i=t.closest("ul").siblings(".dropdown-select");l.removeClass("active"),n.removeClass("active"),t.siblings("li").removeClass("selected"),t.addClass("selected"),s.val(t.attr("data-value")),i.children("span").html(t.text())}})})},i.customTextarea=function(){this.$quiz.find("textarea.autosize").each(function(e,t){var i=t.offsetHeight-t.clientHeight,s=$(t);s.removeAttr("data-autoresize"),s.off("keyup input").on("keyup input",function(e){e.currentTarget.style.height="auto",e.currentTarget.style.height=e.currentTarget.scrollHeight+i+"px"})})},i.sendFormdata=function(){var e=this,t=new FormData(this.$form.get(0));if(t.append("is_ajax","true"),"undefined"!=typeof flexbeAPI&&void 0!==flexbeAPI.customLeadData&&t.append("customLeadData",JSON.stringify(flexbeAPI.customLeadData)),t.append("f_ab",JSON.stringify(flexbe_cli.stat.AB.getcookie())),flexbe_cli.run.is_OSX&&"function"==typeof t.entries){var i=t.entries(),s=Array.isArray(i),a=0;for(i=s?i:i[Symbol.iterator]();;){var n;if(s){if(a>=i.length)break;n=i[a++]}else{if((a=i.next()).done)break;n=a.value}var r=n,o=r[0],l=r[1];"object"==typeof l&&l instanceof File&&0===l.size&&t.delete(o)}}this.$component.addClass("submitting"),this.$form.addClass("submitting"),$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",processData:!1,contentType:!1,data:t,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload,e}}).done(function(t){e.$component.addClass("success"),e.$component.removeClass("submitting"),e.$form.removeClass("submitting"),t.send_formdata=!0,void 0!==t.pay&&(e.pay=t.pay),e.afterSend(),setTimeout(function(){e.$component.removeClass("success")},1e3)}).fail(function(){e.$component.removeClass("submitting success"),e.$form.removeClass("submitting"),e.busy=!1})},i.sendAjax=function(){var e=this;this.$form.addClass("submitting");var t=this.$form.serialize();$.ajax({url:this.$form.attr("action"),type:"POST",dataType:"json",data:t+"&is_ajax=true"}).done(function(t){e.$form.removeClass("submitting"),t.send_ajax=!0,void 0!==t.pay&&(e.pay=t.pay),e.afterSend()}).fail(function(){e.$form.removeClass("submitting")})},i.afterSend=function(){var e=this,t=this.$form.find('input[name="action"]').val();flexbe_cli.stat.reach_goal("order_done");try{var i=this.$form.find('input[name="goal"]').val();void 0!==i&&""!==i&&flexbe_cli.stat.reach_goal(i)}catch(e){}try{var s=this.$form.find('textarea[name="goal_html"]').val();if("string"==typeof s&&s.trim()){var a=document.write;document.write=function(e){$("body").eq(0).append(e)},$("body").eq(0).append('<div style="display:none">'+s+"</div>"),setTimeout(function(){document.write=a},1e4)}}catch(e){}if("pay"===t&&void 0!==this.pay&&null!==this.pay&&this.pay.pay_link.length>0){var n=window.location.origin+window.location.pathname+(window.location.search?window.location.search+"&":"?")+"pay_id="+this.pay.pay_id+"&h="+this.pay.pay_hash;try{window.history.pushState(null,null,n),setTimeout(function(){flexbe_cli.events.emit("pay",{action:"init"})},200)}catch(e){setTimeout(function(){document.location=n},500)}}else if("redirect"===t){var r=this.$form.find('input[name="action_redirect"]').val();r&&r.length&&setTimeout(function(){document.location=r},500)}else{var o=this.$component.find(".quiz-submit").attr("data-modal-id");if(!flexbe_cli.modal.find(o)){var l=String(this.ownerId);o=(l&&l.split("_")[0])+"_"+o}flexbe_cli.modal.find(o)?flexbe_cli.events.emit("modal_command",{command:"open",id:o}):console.warn("Modal open error:","There is no window attached to the form.",o)}setTimeout(function(){e.busy=!1,e.resetForm(),e.toStep(0)},1e3)},i.resetForm=function(){this.$form.get(0).reset(),this.$form.find(".form-field-file, .file-input-outer").removeClass("active"),this.$form.find('.step-fields input:not(:hidden):not([type="radio"])').each(function(e,t){t.value="",t.checked=!1,t.removeAttribute("value"),t.removeAttribute("checked"),t.removeAttribute("data-mask-complete"),t._mask&&t._mask.updateValue()})},i.addFields=function(e,t){void 0===t&&(t=!0);var i=this.$quiz.find(".form-fields-advanced");e.length&&i[0]&&(t&&i.empty(),e.forEach(function(e){i.find('input[name="'+e.name+'"]').remove();var t=$("<input>").attr("type",e.type).attr("name",e.name).attr("value",e.value);i.append(t)}))},i.initSwiper=function(e){if(!flexbe_cli.run.is_screen_all_mobile||!this.isLoaded)return!1;var t=this.$component.find('[data-step-id="'+e+'"] .quiz-slider-outer');t.length&&!this.swiper[e]&&(this.swiper[e]=new Swiper(t.eq(0),{init:!1,speed:450,slidesPerView:"auto",freeMode:!0,spaceBetween:0,slideToClickedSlide:!0,threshold:10,autoHeight:!1,preventClicks:!0,touchMoveStopPropagation:!1,preventClicksPropagation:!0,preventInteractionOnTransition:!0,wrapperClass:"form-field-image-group",slideClass:"form-field-image-item",noSwipingClass:"redactor-box"}),this.swiper[e].init())},i.inputMask=function(){return"undefined"!=typeof IMask&&(this.needInitMasks=!1,this.$masked.each(function(e,t){flexbe_cli.components.classes.form.initMask(t)}),!0)},t}(BaseComponent);flexbe_cli.components.classes.quiz=e}();
"use strict";function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}!function(){var t=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).is="timer",e}_inheritsLoose(e,t);var i=e.prototype;return i.onInit=function(){this.$timer=this.$component.find(".timer"),this.data=this.$timer.data("time"),this.initTimer()},i.initTimer=function(){var t=this.$timer,e=this.data,i=new Date;if("date"===e.type){var a=e.my?String(e.my).replace(".","/").split("/"):[1,2018];this.finalDate=new Date(a[1],parseInt(a[0],10)-1,e.d,e.h,e.m)}else if("monthly"===e.type)this.finalDate=new Date(i.getFullYear(),i.getMonth(),e.d,e.h,e.m),i.getTime()>this.finalDate.getTime()&&(this.finalDate=new Date(i.getFullYear(),i.getMonth()+1,e.d,e.h,e.m)),parseInt(e.d,10)!=this.finalDate.getDate()&&(this.finalDate.setDate(0),i.getTime()>this.finalDate.getTime()&&(this.finalDate=new Date(this.finalDate.getFullYear(),this.finalDate.getMonth()+2,0,e.h,e.m)));else if("weekly"===e.type){var s=parseInt(i.getDate(),10)-parseInt(i.getDay(),10)+parseInt(e.dw,10);this.finalDate=new Date(i.getFullYear(),i.getMonth(),s,e.h,e.m),i.getTime()>this.finalDate.getTime()&&this.finalDate.setDate(this.finalDate.getDate()+7)}else"daily"===e.type?(this.finalDate=new Date(i.getFullYear(),i.getMonth(),i.getDate(),e.h,e.m),i.getTime()>this.finalDate.getTime()&&this.finalDate.setDate(this.finalDate.getDate()+1)):(this.finalDate=new Date,this.finalDate.setMonth(this.finalDate.getMonth()+1,15));this.$itemDay1=t.find(".d [data-value]").eq(0),this.$itemDay2=t.find(".d [data-value]").eq(1),this.$itemDay3=t.find(".d [data-value]").eq(2),this.$itemHour1=t.find(".h [data-value]").eq(0),this.$itemHour2=t.find(".h [data-value]").eq(1),this.$itemMinute1=t.find(".m [data-value]").eq(0),this.$itemMinute2=t.find(".m [data-value]").eq(1),this.$itemSecond1=t.find(".s [data-value]").eq(0),this.$itemSecond2=t.find(".s [data-value]").eq(1),this.lastOffset={d:void 0,h:void 0,m:void 0,s:void 0},!flexbe_cli.is_admin&&"none"!==this.data.on_expired&&this.finalDate.getTime()<i.getTime()?"element"===this.data.on_expired?$(this.owner).hide():$(this.root).hide():this.start()},i.tick=function(){if(this.secondLeft=this.finalDate.getTime()-(new Date).getTime(),this.secondLeft=Math.ceil(this.secondLeft/1e3),this.secondLeft=this.secondLeft<0?0:this.secondLeft,this.offset={d:Math.floor(this.secondLeft/60/60/24),h:Math.floor(this.secondLeft/60/60)%24,m:Math.floor(this.secondLeft/60)%60,s:this.secondLeft%60},this.lastOffset.d!==this.offset.d){var t=this.offset.d.toString().split("");t.length<2&&t.unshift(0),t.length<3&&t.unshift(0),this.$itemDay1.attr("data-value",t[0]).text(t[0]),this.$itemDay2.attr("data-value",t[1]).text(t[1]),this.$itemDay3.attr("data-value",t[2]).text(t[2])}if(this.lastOffset.h!==this.offset.h){var e=this.offset.h.toString().split("");e.length<2&&e.unshift(0),this.$itemHour1.attr("data-value",e[0]).text(e[0]),this.$itemHour2.attr("data-value",e[1]).text(e[1])}if(this.lastOffset.m!==this.offset.m){var i=this.offset.m.toString().split("");i.length<2&&i.unshift(0),this.$itemMinute1.attr("data-value",i[0]).text(i[0]),this.$itemMinute2.attr("data-value",i[1]).text(i[1])}if(this.lastOffset.s!==this.offset.s){var a=this.offset.s.toString().split("");a.length<2&&a.unshift(0),this.$itemSecond1.attr("data-value",a[0]).text(a[0]),this.$itemSecond2.attr("data-value",a[1]).text(a[1])}this.lastOffset=this.offset,this.secondLeft<0&&this.stop()},i.start=function(){var t=this;this.tick(),clearInterval(this.interval),this.interval=setInterval(function(){t.tick()},200)},i.stop=function(){clearInterval(this.interval)},e}(BaseComponent);flexbe_cli.components.classes.timer=t}();
"use strict";!function(){var e={};flexbe_cli.block={hasOverlay:[],$list:!1,get $blocks(){return this._$blocks&&!flexbe_cli.is_admin||(this._$blocks=this.$list&&this.$list.find(".b_block")),this._$blocks},init:function(){var e=this;this.$list=$(" header, .container-list, footer"),this.$blocks.toArray().forEach(function(i){var t=e.bind(i);t&&!t.inited&&t.init({})}),this.dispathEvents()},dispathEvents:function(){var e=this;$(window).on("documentresize.flexbe_block",function(){e.checkSizes()}),$(window).on("resized.flexbe_block orientationchange.flexbe_block",function(){e.checkSizes();var i=flexbe_cli.run.is_mobile?140:10;Math.abs(flexbe_cli.resize.height-flexbe_cli.resize.oldHeight)>i&&e.fixCoverHeight()}),$(window).on("load.flexbe_block",function(){if(/^#/.test(location.hash)){var i=String(location.hash).replace(/^#{1,2}/,""),t=e.$list.find(".b_"+i+', .b_block ._anchor[name="'+i+'"]').eq(0);t&&e.scrollTo(t.closest(".b_block"))}}),flexbe_cli.is_admin&&(flexbe_cli.events.on("block_render.flexbe_block block_change.flexbe_block",function(i,t){if(t&&t.id&&(/render/.test(i.type)||t.name&&!t.templateRendered&&!t.styleRendered)){var l=$('[data-id="'+t.id+'"]',e.$list)[0],n=e.bind(l);n&&n.init(t)}}),flexbe_cli.events.on("block_resize",function(i,t){if(t&&t.id){var l=document.querySelector('[data-id="'+t.id+'"]'),n=e.bind(l);n&&n._onResize(t)}}),flexbe_cli.events.on("client_msg.flexbe_block",function(i,t){if(t&&t.id&&"block"===t.is){var l=$('[data-id="'+t.id+'"]',e.$list)[0],n=e.bind(l);n&&n._onMsg(t.msg,t.data)}}),flexbe_cli.events.off("layout_change.flexbe_block").on("layout_change.flexbe_block",$.debounce(function(i,t){t&&"block"!==!t.is&&(e.updateTweens(),e.fixCoverHeight())},100)))},pushOverlay:function(e,i){return i&&this.hasOverlay.includes(e)&&this.hasOverlay.splice(this.hasOverlay.indexOf(e)),this.hasOverlay.push(e),!0},removeOverlay:function(e){return this.hasOverlay.includes(e)&&this.hasOverlay.splice(this.hasOverlay.indexOf(e)),!0},updateTweens:function(){this.$blocks.each(function(e,i){i._core&&i._core._tween()})},checkSizes:function(){var e=this;this.$blocks.toArray().forEach(function(i){var t=e.bind(i);t&&t._onResize({})})},scrollTo:function(e,i,t){if(void 0===i&&(i=!0),void 0===t&&(t=!1),e=("object"!=typeof e?$('.b_block[data-id="'+e+'"]',this.$list).eq(0):$(e))[0]){var l,n=e,o=n.offsetTop,s=n.offsetHeight,c=flexbe_cli.resize.height-s;i&&s<flexbe_cli.resize.height?(l=o-c/2,c<180&&flexbe_cli.run.is_screen_pc&&$('[data-b-type*="header"][data-b-type*="floating"]').length&&(l-=80)):l=t&&s>flexbe_cli.resize.height?o+(s-flexbe_cli.resize.height)/2:o,$("body, html").animate({scrollTop:l})}},fixCoverHeight:function(e){void 0===e&&(e=this.$list.find(".b_block")),e.length&&e.each(function(e,i){var t=$(i),l=t.find(".cover");if(l.length){var n=flexbe_cli.resize.height,o=0,s=n;if([2,3].includes(flexbe_cli.theme_id)){var c,a=t.prevAll(".b_block");c=(c=flexbe_cli.is_admin&&t.is('[data-abtest-variant="b"]')?a.eq(1):a.eq(0)).filter('[data-b-type*="header"]').not('[data-b-type*="overflow"]'),(o=Math.max(0,c.outerHeight()||0))<250&&o<n/2.5&&(s-=o)}l.css("min-height",s+"px"),flexbe_cli.run.is_ie&&s>=l.outerHeight()&&l.css("height","1px")}})},bind:function(i){if(!i)return!1;var t=i.getAttribute("data-b-id"),l=i._core;if(t&&!l){var n=e[t]||{};l=new BlockCore(i,n),i._core=l}return l},register:function(i,t){void 0===t&&(t={}),i||console.warn("Element register error: Element must have templateId"),e[i]=t}}}();
"use strict";!function(){var e={};flexbe_cli.modal={opened:{},get $modals(){return this._$modals&&!flexbe_cli.is_admin||(this._$modals=this.$list&&this.$list.find(".m_modal")),this._$modals},init:function(){var e=this;this.list=document.querySelector(".modal-list"),this.$list=$(this.list),this.$modals.toArray().forEach(function(t){var i=e.bind(t,{},"init");i&&!i.inited&&i.init({})});var t=getJsonFromUrl();if(t.service&&t.m_id)return this.$list.addClass("noanimate"),this.open(t.m_id),!1;this.popstate(),this.dispathEvents()},dispathEvents:function(){var e=this;flexbe_cli.events.on("modal_render.flexbe_modal modal_change.flexbe_modal",function(t,i){if(i&&i.id&&(/render/.test(t.type)||i.name&&!i.templateRendered&&!i.styleRendered)){var o=(e.find(i.id)||{}).modal,a=e.bind(o);a&&a.init(i)}}),flexbe_cli.events.on("client_msg.flexbe_modal",function(t,i){if(i&&i.id&&"modal"===i.is){var o=(e.find(i.id)||{}).modal,a=e.bind(o);a&&a._onMsg(i.msg,i.data)}}),flexbe_cli.events.on("modal_command.flexbe_modal",function(t,i){if(i)switch(i.command){case"open":e.open(i.id,i.data);break;case"close":e.close(i.id)}}),$("body").on("click.modal-close",".m_modal .close",function(t){t.preventDefault(),t.stopPropagation();var i=$(t.currentTarget).closest(".m_modal").data("id");e.close(i)}),flexbe_cli.is_admin||$("body").off("click.modal-close-overlay").on("click.modal-close-overlay",".modal-data",function(t){if(!flexbe_cli.run.is_mobile&&Object.keys(e.opened).length&&($(t.target).is(".modal-data")||$(t.target).is('[data-overlay="true"]'))){var i=$(".m_modal.show").eq(0).attr("data-id");e.close(i)}}),flexbe_cli.is_admin||$(window).off("keyup.modal-close-esc").on("keyup.modal-close-esc",function(t){if(27!==t.keyCode)return!0;var i=$(".m_modal.show").eq(0).attr("data-id");e.close(i)})},popstate:function(){var e=this;if(flexbe_cli.is_admin||flexbe_cli.lockPopstate)return!1;setTimeout(function(){if(/^#{1,2}/.test(location.hash)&&location.hash.replace(/^#{1,2}/,"")){var t=location.hash.replace(/^#{1,2}/,""),i=e.$list.find('._anchor[name="'+t+'"], .m_modal[data-id="'+t+'"]').closest(".m_modal").attr("data-id");e.opened[i]||e.open(i)}else e.close()},50)},find:function(e){var t=this.$list.find('[data-id="'+e+'"]').toArray(),i=t[0]||!1;return!!i&&{modals:t,modal:i}},open:function(e,t,i){if(void 0===t&&(t={}),void 0===i&&(i={}),!e)return!1;var o=this.find(e)||{},a=o.modals,n=o.modal,l=$(a);if(!n)return!1;if(l.length>1){var d=i.multivar;if(!d){var s=String(e).split("_")[0];d=$('[data-id="'+s+'"]').attr("data-multivar")}var r=[];d&&"default"!==d&&(r=l.filter('[data-multivar="'+d+'"]').eq(0)),n=(l=r.length?r.eq(0):l.eq(0))[0]}var c=this.bind(n);return n&&!c?(console.warn("Try to open modal without core object,","id: "+e+",","modal: ",n),!1):(this.close(null,e),c.open(t,i),this.opened[e]=c,!0)},close:function(e,t){var i=this;if(!e)return Object.keys(this.opened).map(function(e){if(i.opened[e]&&e!=t)return i.close(e,t)});if(!this.opened[e])return!1;delete this.opened[e];var o=(this.find(e)||{}).modal,a=this.bind(o);return o?a?(a.close({from:t}),!0):(console.warn("Try to close modal without core object"),!1):void 0},bind:function(t){if(!t)return!1;var i=t.getAttribute("data-m-id"),o=t._core;if(i&&!o){var a=e[i]||{};o=new ModalCore(t,a),t._core=o}return o},register:function(t,i){void 0===i&&(i={}),t||console.warn("Element register error: Element must have templateId"),e[t]=i}}}();
"use strict";!function(){var e={};flexbe_cli.widget={init:function(){var e=this;this.$list=$(".widget-list"),this.list=this.$list.get(0),this.$list.find(".w_widget").toArray().forEach(function(t){var i=e.bind(t,{},"init");i&&!i.inited&&i.init({})}),this.dispathEvents()},dispathEvents:function(){var e=this;flexbe_cli.events.on("widget_render.flexbe_widget widget_change.flexbe_widget",function(t,i){if(i&&i.id&&(/render/.test(t.type)||i.name&&!i.templateRendered&&!i.styleRendered)){var n=$('[data-id="'+i.id+'"]',e.$list)[0],d=e.bind(n);d&&d.init(i)}}),flexbe_cli.events.on("client_msg.flexbe_widget",function(t,i){if(i&&i.id&&"widget"===i.is){var n=e.list.querySelector('[data-id="'+i.id+'"]'),d=e.bind(n);d&&d._onMsg(i.msg,i.data)}})},bind:function(t){if(!t)return!1;var i=t.getAttribute("data-w-id"),n=t._core;if(!n){var d=e[i]||{};n=new WidgetCore(t,d),t._core=n}return n},register:function(t,i){void 0===i&&(i={}),t||console.warn("Element register error: Element must have templateId"),e[t]=i}}}();
"use strict";flexbe_cli.menu={anchors:[],floating:!1,offset:0,init:function(){this.createMobileMenu(),this.floatingMenu()},floatingMenu:function(){if(!flexbe_cli.is_admin&&!this.floating){var e=[];if((e=$("[data-floating=true]").eq(0))[0]){var n,i=e.parents(".b_block").last()[0]._core,t=e.outerHeight(),o=parseInt(e.attr("data-floating-type"),10)||1;this.floating=i.id,e.siblings(".fixer").height(t),flexbe_cli.run.is_screen_mobile||flexbe_cli.run.is_screen_tablet_s?(e=$(".mobile-menu .menu-burger"),o=1):e=e.add(".mobile-menu .menu-burger"),function s(){var c;requestAnimationFrame(s),c=(i&&i.tween?i.tween.position:window.pageYOffset/(t/2))>=l,a!==c&&(a=c,e.off("transitionend"),c?(e.addClass("floating"),clearTimeout(n),n=setTimeout(function(){e.addClass("animate show")},50)):1===o?(e.removeClass("show"),e.one("transitionend",function(){e.removeClass("animate floating")})):e.removeClass("show animate floating"))}();var a=!1,l=.02;1===o&&(l=(i&&i.tween&&i.tween.height)<200?2:1)}}},createMobileMenu:function(){if(!flexbe_cli.adaptive||99===flexbe_cli.theme_id)return!1;var e=$(".b_block:not(.hidden) .menu-burger");if(!this.$mobileMenu){if(this.$mobileMenu=$('<div class="mobile-menu">\n                        <div class="menu-burger">\n                            <span class="menu"><i></i><i></i><i></i></span>\n                        </div>\n                        <div class="menu-wrapper">\n                            <div class="overlay"></div>\n                            <div class="menu-content">\n                                <div class="scroll-wrap">\n                                    <div class="logo-holder"></div>\n                                    <div class="menu-holder"></div>\n                                    <div class="text-holder"></div>\n                                    <div class="socials-holder"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>').appendTo("body"),e[0]){var n=e.eq(0).closest(".b_block").data("bId"),i=e.eq(0).closest(".b_block").data("id");e.not(":first").remove(),this.$mobileMenu.attr("data-id",i).attr("data-b-id",n)}flexbe_cli.components.links(this.$mobileMenu)}var t=this.$mobileMenu.find(".logo-holder"),o=this.$mobileMenu.find(".menu-holder"),a=this.$mobileMenu.find(".text-holder"),l=this.$mobileMenu.find(".socials-holder");function s(e,n){var i=c(e),t=i.url,o=i.search,a=i.hash,l=0;return n.find("a").each(function(e,n){var i=c(n.href),s=i.url,r=i.hash,d=i.search;s===t&&d===o&&r===a&&(l+=1)}),!l}function c(e){var n=String(e).trim().replace(/http(?:s)?:\/\//,"//").split("?"),i=(n[0]||"").replace(/^\.\//,"").replace(/\/$/,""),t=(n[1]||"").split("#"),o=t[0],a=t[1];return i&&location.host+location.pathname!==i.replace(/^\/\//,"")||(i="./"),{url:i,search:o,hash:a}}$(".b_block").not(".hidden").find('[data-role="mobile-menu"]').each(function(e,n){$(n).find("[data-role]").each(function(e,n){var i=$(n);switch(i.attr("data-role")){case"logo":!function(e){t.contents().length||t.html(e.contents())}(i);break;case"text":!function(e){a.contents().length||a.html(e.contents())}(i);break;case"menu":!function(e){o.contents().length||(o.append(e.clone().contents()),o.find("li").remove());var n=o.find("ul");e.find("a[href]").each(function(e,i){var t=s(i.href,n);if(t){var o=$(i).closest("li");n.append(o)}})}(i);break;case"socials":!function(e){if(l.contents().length){var n=l.find(".socials-wrap");e.find("a[href]").each(function(e,i){var t=$(i).attr("href"),o=s(t,n);o&&n.append(i)})}else l.append(e.contents())}(i)}})}),o.find(".component-menu").removeAttr("data-style"),this.toggleMobileMenu()},toggleMobileMenu:function(){var e,n=$("body > .mobile-menu").eq(0);function i(t){clearTimeout(e),e=setTimeout(function(){$("body").toggleClass("overflow fixed",t),n.toggleClass("show",t).off("click.mobile-menu-close"),t&&n.on("click.mobile-menu-close",function(e){var n=$(e.target);(2===flexbe_cli.theme_id&&n.is(".overlay")||3===flexbe_cli.theme_id&&!n.closest(".menu-holder").length)&&i(!1)})},100)}$(".menu-burger").off("click.mobile-menu-toggle").on("click.mobile-menu-toggle",function(){i(!n.hasClass("show"))}),n.on("close",function(){i(!1)}),n.on("open",function(){i(!0)})}};
"use strict";flexbe_cli.init=function(){flexbe_cli.run.init(),flexbe_cli.events.init(),flexbe_cli.lib.init(),flexbe_cli.locale.init(),flexbe_cli.stat.init(),flexbe_cli.scroll.init(),flexbe_cli.resize.init(),flexbe_cli.components.init(),flexbe_cli.block.init(),flexbe_cli.modal.init(),flexbe_cli.widget.init(),flexbe_cli.menu.init()},flexbe_cli._init();